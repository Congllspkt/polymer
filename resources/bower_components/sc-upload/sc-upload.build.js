/**
 * EMRO SMART Upload - 
 * @version 5.1.0
 * @link http://www.emro.co.kr/
 * @license
 * Copyright 2016-2024 EMRO Co. Ltd., All Rights Reserved.
 */
var e;Polymer.SCA11yUploadBehaviorImpl={properties:{uploadConfirmText:{type:String,computed:"__propertyTranslate('uploadConfirmText', uploadConfirmText, __i18nLocale)",value:"파일을 업로드하시겠습니까?"},downloadConfirmText:{type:String,computed:"__propertyTranslate('downloadConfirmText', downloadConfirmText, __i18nLocale)",value:"파일을 다운로드하시겠습니까?"}},formulas:{disableDeleteButton:function(){return!!Polymer.$Util.isEmpty(this._disableDeleteButton)||(setTimeout(function(){this._disableDeleteButton?this.querySelector("[delete-btn]").tabIndex=-1:this.querySelector("[delete-btn]").tabIndex=0}.bind(this),100),this._disableDeleteButton)},disableDownloadButton:function(){return!!Polymer.$Util.isEmpty(this._disableDownloadButton)||(setTimeout(function(){this._disableDownloadButton?this.querySelector("[download-btn]").tabIndex=-1:this.querySelector("[download-btn]").tabIndex=0}.bind(this),100),this._disableDownloadButton)},disableUpdateButton:function(){return!!Polymer.$Util.isEmpty(this._disableUpdateButton)||this._disableUpdateButton},addButton:function(){return!!this.readonly||!this.editable},uploadButton:function(){return!!this.readonly||!this.editable||!this.uploadable},downloadButton:function(){return!!this.readonly||!!this.editable&&!this.downloadable},deleteButton:function(){return!!this.readonly||!this.editable||!this.deletable},updateButton:function(){return!(!this.readonly&&this.editable&&this.useCustomField&&this.updatable)}},_computedFileBrowse:function(e,t){return!(t<=0)&&this._files.length>=t},_computedUpload:function(e){return!(this._hasUploadFiles()||this._hasDeleteFiles())},_onUpload:function(){SCAlert.confirm(this.alertTitleText,this.uploadConfirmText,function(e,t){"yes"===e&&this.upload()}.bind(this))},_onDownload:function(i){var e=i.detail;if(!this.readonly&&this.doubleClickDownload)if("download"==i.type&&3==this._uploader.getFile(e).state)SCAlert.confirm(this.alertTitleText,this.downloadConfirmText,function(e,t){"yes"===e&&this.download(i.detail)}.bind(this));else{for(var t,l=this._viewer.selectedFiles,n=[],o=0,s=l.length;o<s;o++)t=l[o],3==this._uploader.getFile(t.id).state&&n.push(t.id);n.length&&SCAlert.confirm(this.alertTitleText,this.downloadConfirmText,function(e,t){"yes"===e&&this.downloadZip(n)}.bind(this))}},getFocusableNodesStrategy:SCOverlay.prototype.getFocusableNodesStrategy},Polymer.SCA11yUploadBehavior=[Polymer.SCA11yUploadBehaviorImplOverride||Polymer.SCA11yUploadBehaviorImpl],Polymer.SCA11yUploadListViewBehaviorImpl={properties:{sortDirection:{type:String,value:"asc"},a11yFilenameText:{type:String,computed:"__propertyTranslate('a11yFilenameText', a11yFilenameText, __i18nLocale)",value:"파일이름"},a11yFilesizeText:{type:String,computed:"__propertyTranslate('a11yFilesizeText', a11yFilesizeText, __i18nLocale)",value:"파일크기"},a11yAscText:{type:String,value:"오름차순으로"},a11yDescText:{type:String,value:"내림차순으로"},a11ySortText:{type:String,value:"정렬됨"},a11yHeaderTriggerRole:{type:String,value:"button"}},listeners:{"space-key-pressed":"_spaceKeyPressedHandlerOnUploadListView","enter-key-pressed":"_enterKeyPressedHandlerOnUploadListView"},observers:["changedSortDirection(sortDirection)"],get _upload(){return this.domHost},get _selectionEl(){return this._upload.querySelector(".active-focus-visible")},get _selectionFileId(){return this._selectionEl&&this._selectionEl.getAttribute("file-id")},get listboxElement(){return this._listboxEl||(this._listboxEl=this.querySelector("sc-listbox"),this._listboxEl.onkeydown||(this._listboxEl.onkeydown=function(e){13==e.keyCode&&this.fire("enter-key-pressed",e)}.bind(this))),null==this._listboxEl.querySelector(".fileitem")?this._listboxEl.tabIndex=-1:this._listboxEl.tabIndex=0,this._listboxEl},_beforeRender:function(e){var t;return e&&e.parentElement?((t=e.parentElement.querySelector(".fileitem"))&&t.getAttribute("file-id")==e.getAttribute("file-id")?e.tabIndex=0:e.tabIndex=-1,this._extractAriaText(e)):null},_extractAriaText:function(e){var t=e.querySelector(".file-state"),i=e.querySelector(".fileitem-selection"),l=e.querySelector(".fileitem-filename"),e=e.querySelector(".fileitem-filesize"),i=i.querySelector("input")&&i.querySelector("input").checked?"선택":"해제";return(t.querySelector(".ready-state-file")?"신규":"")+" "+i+" "+l.querySelector("span").innerText+" "+e.querySelector("span").innerText},_onSelectionClick:function(e){var e=e.target,t=!e.hasAttribute("checked");this.fileMap,this.isSelectionClick=!0,e.checked=t,this.changeAriaTextOnCheckbox(e),this.toggleAttribute("checked",t,e),this.selectionAllElement.checked=this.selectedFileCount===this.files.length,this._selectionChanged()},_onAllSelectionChange:function(e){for(var t,i=e.detail,l=this.listboxElement.querySelectorAll(".fileitem-selection input"),n=0,o=l.length;n<o;n++)(t=l[n]).checked=i,this.changeAriaTextOnCheckbox(t),this.toggleAttribute("checked",i,t);this._selectionChanged()},changeAriaTextOnCheckbox:function(e){for(var t=e.parentElement;!t.classList.contains("fileitem")&&"body"!=t.nodeName;)t=t.parentElement;t.setAttribute("aria-label",this._extractAriaText(t))},_spaceKeyPressedHandlerOnUploadListView:function(e){var t=e.detail.keyboardEvent,i=t.shiftKey,t=t.target,i=i?((i=this.headerCheckboxElement).checked=!i.checked,i):t.querySelector("input");this._fireCustomEvent(i),e.stopPropagation(),e.preventDefault()},_enterKeyPressedHandlerOnUploadListView:function(e){this._upload.download(this._selectionFileId),e.stopPropagation(),e.preventDefault()},_fireCustomEvent:function(e,t,i){e.dispatchEvent(new CustomEvent(t||"click",i||{bubbles:!0}))},tabKeyPressedHandlerOwn:function(e){this.isInWindow()&&(this.getWindowContainer(),e.detail.keyboardEvent.shiftKey||(A11yUT.nextFocusByScope(A11yUT.up(this,"sc-window")),e.preventDefault()))},isInWindow:function(){return null!=this.getWindowContainer()},getWindowContainer:function(){return A11yUT.up(this,"sc-window")},get headerCheckboxElement(){return this._listviewHeaderEl.querySelector("input:not([disabled])")},getFocusableNodes:function(e,t){var i,l=A11yUT.findFocusableNodes(e);return 0<l.length?l[i=t&&"previous"==t?l.length-1:0]&&0<l[i].clientWidth&&0<l[i].clientHeight?l[i]:(l=e[t+"ElementSibling"])?this.getFocusableNodes(l,t):null:null},getFocusableNodesStrategy:SCOverlay.prototype.getFocusableNodesStrategy,_renderHeaders:function(){var e=this.listviewHeaderElement,t=document.createDocumentFragment();templates=this.uploadTemplates,flexWidth=this._computedFlexWidth();for(var i,l,n=position=0,o=templates.length;n<o;n++)i=templates[n],this.hideStateColumn&&i instanceof SCUploadListViewState||(l=i.generateHeader(),this.hideSelectionColumn&&i instanceof SCUploadListViewSelection&&(l.hidden=this.hideSelectionColumn),!l.hidden&&i.isFlexWidth()&&(i.width=flexWidth),l.hidden||(l.style.cssText="left: "+position+"px; width: "+i.width+"px;",position+=i.width),t.appendChild(l));e.appendChild(t),this.applyFilenameHeader(e.querySelector(".fileitem-filename")),this.applyFilesizeHeader(e.querySelector(".fileitem-filesize")),this.listen(e,"click","_onHeaderClick")},applyFilenameHeader:function(e){e.firstChild.role=this.a11yHeaderTriggerRole,e.firstChild.tabIndex=0,e.firstChild.ariaLabel=this.filenameAriaLabel(),this.changedSortDirection(this.sortDirection),this.listen(e.firstChild,"keydown",this.onFilenameHeaderHandler)},applyFilesizeHeader:function(e){e.firstChild.role=this.a11yHeaderTriggerRole,e.firstChild.tabIndex=0,e.firstChild.ariaLabel=this.filesizeAriaLabel(),this.changedSortDirection(this.sortDirection),this.listen(e.firstChild,"keydown",this.onFilesizeHeaderHandler)},getFakeElement:function(e){var t;return e.querySelector("#fakeVoice")?e.querySelector("#fakeVoice"):((t=document.createElement("div")).setAttribute("id","fakeVoice"),t.style.height="0px",e.insertBefore(t,e.firstChild),t)},onFilenameHeaderHandler:function(e){A11yUT.keyCode.enter==e.keyCode&&(this.sortDataField=e.target.parentElement.getAttribute("data-field"),this.sortDirection="asc"==this.sortDirection?"desc":"asc",e.target.ariaLabel=this.filenameAriaLabel(),e.preventDefault())},onFilesizeHeaderHandler:function(e){A11yUT.keyCode.enter==e.keyCode&&(this.sortDataField=e.target.parentElement.getAttribute("data-field"),this.sortDirection="asc"==this.sortDirection?"desc":"asc",e.target.ariaLabel=this.filesizeAriaLabel(),e.preventDefault())},filenameAriaLabel:function(){return"asc"==this.sortDirection?this.a11yFilenameText+" "+this.a11yDescText+" "+this.a11ySortText:this.a11yFilenameText+" "+this.a11yAscText+" "+this.a11ySortText},filesizeAriaLabel:function(){return"asc"==this.sortDirection?this.a11yFilesizeText+" "+this.a11yDescText+" "+this.a11ySortText:this.a11yFilesizeText+" "+this.a11yAscText+" "+this.a11ySortText},changedSortDirection:function(e,t){var i=this.listviewHeaderElement,l=i.querySelector(".fileitem-filename"),i=i.querySelector(".fileitem-filesize"),n=null,o="";document.activeElement==l?(n=l,o=this.filenameAriaLabel()):document.activeElement==i&&(n=i,o=this.filesizeAriaLabel()),n&&n.firstChild&&(l=n.firstChild,i=this.getFakeElement(l),A11yUT.fakeVoice(filenameContentEl,i,o),filenameContentEl.ariaLabel=o)}},Polymer.SCA11yUploadListViewBehavior=[Polymer.SCA11yUploadListViewBehaviorImpl],Polymer.SCA11yUploadListViewSelectionBehaviorImpl={keyBindings:{tab:"_onTabKeyHandler"},get checkbox(){return this._checkbox||(this._checkbox=this.getDocument().createElement("input"),this._checkbox.title="전체선택"),this._checkbox},generateHeader:function(){var e=this.getDocument().createElement("div"),t=this.styleName,i=this.checkbox;return Polymer.$Util.isEmpty(t)||e.classList.add(t),this.listen(i,"click",this._onCheckboxClick),this.listen(i,"focus",this._onCheckboxFocus),this.listen(i,"blur",this._onCheckboxBlur),i.setAttribute("id","fileSelect"),i.setAttribute("type","checkbox"),i.setAttribute("selection-all",!0),e.setAttribute("template-id",this.templateId),e.appendChild(i),e},generateTemplate:function(){var e=this.getDocument(),t=Polymer.SCUploadListViewTemplateBehaviorImpl.generateTemplate.call(this),e=e.createElement("input");return e.setAttribute("type","checkbox"),e.tabIndex=-1,t.setAttribute("on-click","_onSelectionClick"),t.appendChild(e),t},_onCheckboxFocus:function(e){e.target.parentElement.setAttribute("header-focused","")},_onCheckboxBlur:function(e){e.target.parentElement.removeAttribute("header-focused")}},Polymer.SCA11yUploadListViewSelectionBehavior=[Polymer.SCFocusableBehavior,Polymer.SCA11yUploadListViewSelectionBehaviorImplOverride||Polymer.SCA11yUploadListViewSelectionBehaviorImpl],window.A11yUT||(window.A11yUT={isEnabled:function(){return!1}}),A11yUT.isEnabled()&&(Polymer.SCA11yUploadInjector={},Polymer.SCA11yUploadInjector.items={"sc-upload-listview-selection":Polymer.SCA11yUploadListViewSelectionBehavior,"sc-upload-listview":Polymer.SCA11yUploadListViewBehavior,"sc-upload":Polymer.SCA11yUploadBehavior},e=Polymer&&(Polymer.webAccessibility||Polymer.Settings.webAccessibility),tobeInjectItems=e&&e.behaviorsMixinUpload||{},Polymer.Base._addFeature({_a11yChainObjectProcessor:function(e,t){var i,l=e.is;Polymer.$Util.isEmpty(l)||((i=Polymer.SCA11yUploadInjector.items[l])&&e.behaviors.push(i),tobeInjectItems[l]&&e.behaviors.push(tobeInjectItems[l]))}}),Polymer.Base._registerBeforeChainObjectProcessor(Polymer.Base._a11yChainObjectProcessor)),function(){function e(){}var t;SCUploadUtil=Polymer.$UploadUtil=(t=new(Polymer({is:"sc-upload-util",properties:{thresh:{type:Number,value:1024},units:{type:Array,readOnly:!0,value:["KB","MB","GB","TB","PB","EB"]}},byteToFormattedDisplaySize:function(e,t,i){return Polymer.$String.simpleFormat(e,t.toFixed("bytes"==i?0:2),i)},byteToDisplaySize:function(e,t){var i=this.thresh,l=this.units,n=l.length-1,o=-1;if(e=Number(e),Math.abs(e)<i)return Polymer.$Util.isFunction(t)?t(e,"bytes"):e+"bytes";for(;e/=i,++o,Math.abs(e)>=i&&o<n;);return Polymer.$Util.isFunction(t)?t(e,l[o]):e+l[o]},displaySizeToByte:function(e){this.thresh;var t,i=this.units,l=i.length-1,n=-1;if(e=String(e),Polymer.$Util.isEmpty(e))return e;if(-1<e.indexOf("bytes"))return Number(e.replace("bytes",""));for(;t=i[n],++n,e.indexOf(t)<0&&n<l;);return Number(e.replace(t,""))*Math.pow(1024,n)},_destroy:function(){this.thresh=null,this.units=null}})),e.prototype.findDownloadLogParameter=function(e,t){{if(Polymer.$Util.isFunction(t))return t(e);if(Polymer.$Util.isString(t))return t;for(var t="menucode",i=[];!Polymer.DomApi.matchesSelector.call(e,"[menucode]")&&e.parentElement;)e.__isPolymerInstance__&&i.push(e),e=e.parentElement;return i=i.map(function(e){return e.tagName.toLowerCase()}),"[object HTMLHtmlElement]"==Object.prototype.toString.call(e)?window.SCUploadDownloadLogMenuCode||i.reverse().join("/"):e.getAttribute(t)}},e.prototype.byteToDisplaySize=t.byteToDisplaySize.bind(t),e.prototype.displaySizeToByte=t.displaySizeToByte.bind(t),e.prototype.byteToFormattedDisplaySize=t.byteToFormattedDisplaySize.bind(t),new e)}(),Polymer.SCUploadViewBehaviorImpl={properties:{_boundByteToFormattedDisplaySize:{type:Function,value:function(){return SCUploadUtil.byteToFormattedDisplaySize.bind(SCUploadUtil,"{0} {1}")}},isAvailable:{type:Object,value:function(){return!1}},interactDraggableElementRect:{type:Object,value:null},files:{type:Array},editable:{type:Boolean,value:!0},reorderable:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_interactPropertiesChanged"},resizable:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_interactPropertiesChanged"},sortDataField:{type:String,notify:!0},sortDirection:{type:String,notify:!0,value:"asc"},doubleClickDownload:{type:Boolean,value:!0}},observers:["_filesChanged(files.splices)","_sortPropertyChanged(sortDataField, sortDirection)"],get __bundleName(){return"component.sc-upload"},get fileMap(){return this.files.reduce(function(e,t,i){return e[t.id]=t,e},{})},get selectedFileCount(){return this.selectedFiles.length},setAvailable:function(e){(this.isAvailable=e)&&this._filesChanged()},_computedDropInfo:function(e){return!!this.files.length||!this.editable},_sortPropertyChanged:function(){return this._isPrepared?void(this.isAvailable&&this.sort(this.sortDataField,this.sortDirection)):this.listen(this,"sc-upload-viewer-prepared","_sortPropertyChanged",{single:!0})},_onDblClick:function(e){(e.target.classList.contains("droptext")||this.listboxElement.contains(e.target)&&!Polymer.$Element.up(e.target,"[file-id]"))&&this.fire("add",e,{bubbles:!1})},sort:function(n,e){var o=this.caseSensitiveSorting;this.files.sort("asc"==e?function(e,t){var i=e[n],l=t[n];return!o&&Polymer.$Util.isString(i)&&Polymer.$Util.isString(l)&&(i=e[n].toLowerCase(),l=t[n].toLowerCase()),i<l?-1:l<i?1:0}:function(e,t){var i=e[n],l=t[n];return!o&&Polymer.$Util.isString(i)&&Polymer.$Util.isString(l)&&(i=e[n].toLowerCase(),l=t[n].toLowerCase()),l<i?-1:i<l?1:0})},getStateImage:function(e){var t="";return smtutil.File.prototype.FILE_READY===e?t="ready-state-file":smtutil.File.prototype.FILE_UPLOADING===e?t="uploading-state-file":smtutil.File.prototype.FILE_FAILED===e?t="failed-state-file":smtutil.File.prototype.FILE_SUCCEED===e&&(t="succeed-state-file"),t},getCustomizedStateImage:function(e){var t="";return t=smtutil.File.prototype.FILE_READY===e?"new-file-icon":t},processNullValue:function(e){return null==e?"":e},attached:function(){this._isPrepared||(this._isPrepared=!0,this._prepare())},_prepare:function(){this.fire("sc-upload-viewer-prepared",{bubbles:!1})},_commonDestroy:function(){this._uploadTemplates&&(this._uploadTemplates.length=0,this._uploadTemplates=null),this._selectionAllEl=null,this._uploadUtil=null},_destroy:function(){this._commonDestroy(),this._boundByteToFormattedDisplaySize=null,this.isAvailable=null,this.interactDraggableElementRect=null,this.files=null,this.editable=null,this.reorderable=null,this.resizable=null,this.selectedFiles=null}},Polymer.SCUploadViewBehavior=[Polymer.SCUploadViewBehaviorImpl],Polymer.SCUploadListViewTemplateBehaviorImpl={properties:{headerText:{type:String},dataField:{type:String,reflectToAttribute:!0},editable:{type:Boolean,value:!1},type:{type:String,value:"text"},required:{type:Object,value:function(){return!1}},formatType:{type:String},maskRe:{type:String},readonly:{type:Object,value:function(){return!1}},minLength:{type:Number},maxLength:{type:Number},items:{type:Array},displayField:{type:String,value:"text"},valueField:{type:String,value:"value"},headerEventDisabled:{type:Boolean,value:!1},resizable:{type:Boolean,value:!1},reorderable:{type:Boolean,value:!1},sortable:{type:Boolean,value:!1},styleName:{type:String},tooltip:{type:Object,value:!1},templateId:{type:String,reflectToAttribute:!0,value:function(){return Polymer.SCAutoGenIdBehavior.generateId(!0)}},minWidth:{type:Number,value:100},width:{type:Number,value:100},flexWidth:{type:Object,value:!1},visible:{type:Object,value:!0}},hostAttributes:{"upload-template":!0,hidden:!0},get __bundleName(){return"component.sc-upload"},isFlexWidth:function(){return!!isNaN(this.width)||this.flexWidth},generateHeader:function(){var e=this.getDocument(),t=e.createElement("div"),i=this.headerText,l=this.styleName,n=this.dataField,o=this.visible,s=this.getAttribute("header-text");return Polymer.$Util.isEmpty(s)||(i=s),Polymer.$Util.isEmpty(l)||t.classList.add(l),Polymer.$Util.isEmpty(i)||((s=e.createElement("span")).textContent=i,t.appendChild(s)),Polymer.$Util.isEmpty(n)||t.setAttribute("data-field",n),this.resizable&&t.setAttribute("resizable",this.resizable),(l=e.createElement("div")).classList.add("fileitem-resizer"),t.setAttribute("template-id",this.templateId),t.appendChild(l),t.hidden=!o,t},generateTemplate:function(){var e=this.getDocument(),t=e.createElement("div"),i=this.dataField,l=this.styleName,n=this.tooltip,o=this.visible;return t.hidden=!o,Polymer.$Util.isEmpty(l)||t.classList.add(l),Polymer.$Util.isEmpty(i)||(t.setAttribute("data-field",this.dataField),this instanceof SCUploadListViewTemplate?("true"===this.getAttribute("editable")?this.readonly=!1:"false"===this.getAttribute("editable")&&(this.readonly=!0),"combo"===this.type?(o=this.querySelector("sc-combobox-field"),"false"===this.getAttribute("input-clear")&&o.setAttribute("input-clear",!1),t.appendChild(o)):(l=this.querySelector("sc-text-field"),t.appendChild(l))):((o=e.createElement("span")).textContent=this._bindDataField(i),t.appendChild(o),!0===n&&(t.classList.add("uploadtooltip"),o.setAttribute("data-tooltip-text","[[processNullValue(item."+this.dataField+")]]"),t.innerHTML=t.innerHTML.replace("data-tooltip-text=","data-tooltip-text$=")),this instanceof SCUploadListViewFileName&&this.hideStateColumn&&((l=e.createElement("div")).setAttribute("class-name","[[getCustomizedStateImage(item.state)]]"),t.appendChild(l)))),t.setAttribute("template-id",this.templateId),t},_bindDataField:function(e){return"[[item."+e+"]]"},_destroy:function(){this.dataField=null,this.styleName=null,this.templateId=null,this.headerText=null,this.headerEventDisabled=null,this.flexWidth=null,this.width=null,this.minWidth=null,this.resizable=null,this.reorderable=null,this.sortable=null}},Polymer.SCUploadListViewTemplateBehavior=[Polymer.SCI18nBehavior,Polymer.SCUploadListViewTemplateBehaviorImpl],SCUploadListViewTemplate=Polymer({is:"sc-upload-listview-template",behaviors:[Polymer.SCUploadListViewTemplateBehavior]}),SCUploadListViewState=Polymer({is:"sc-upload-listview-state",behaviors:[Polymer.SCUploadListViewTemplateBehavior],properties:{styleName:{type:String,value:"file-state"},minWidth:{type:Number,value:24},width:{type:Number,value:24}},get stateIcon(){return this._stateIcon||(this._stateIcon=this.getDocument().createElement("div")),this._stateIcon},generateHeader:function(){var e=this.getDocument().createElement("div"),t=this.styleName;return Polymer.$Util.isEmpty(t)||e.classList.add(t),e.setAttribute("template-id",this.templateId),e},generateTemplate:function(){this.getDocument();var e=Polymer.SCUploadListViewTemplateBehaviorImpl.generateTemplate.call(this),t=this.stateIcon;return e.appendChild(t),t.setAttribute("class-name","state-icon [[getStateImage(item.state)]]"),e},_destroy:function(){this.styleName=null,this.minWidth=null,this.width=null,this._stateIcon=null}}),Polymer.SCUploadListViewSelectionBehaviorImpl={properties:{disabled:{type:Boolean,value:!1,observer:"_disabledChanged"},styleName:{type:String,value:"fileitem-selection"},minWidth:{type:Number,value:24},width:{type:Number,value:24},headerEventDisabled:{type:Boolean,value:!0}},get checkbox(){return this._checkbox||(this._checkbox=this.getDocument().createElement("input")),this._checkbox},generateHeader:function(){var e=this.getDocument().createElement("div"),t=this.styleName,i=this.checkbox;return Polymer.$Util.isEmpty(t)||e.classList.add(t),this.listen(i,"click","_onCheckboxClick"),i.setAttribute("id","fileSelect"),i.setAttribute("type","checkbox"),i.setAttribute("selection-all",!0),e.setAttribute("template-id",this.templateId),e.appendChild(i),e},generateTemplate:function(){var e=this.getDocument(),t=Polymer.SCUploadListViewTemplateBehaviorImpl.generateTemplate.call(this),e=e.createElement("input");return e.setAttribute("type","checkbox"),t.setAttribute("on-click","_onSelectionClick"),t.appendChild(e),t},_onCheckboxClick:function(e){this.fire("check",e.target.checked,{bubbles:!1})},_disabledChanged:function(e){this.checkbox.disabled=e},_destroy:function(){this.unlisten(this.checkbox,"click","_onCheckboxClick"),this._checkbox=null,this.disabled=null,this.styleName=null,this.minWidth=null,this.width=null,this.headerEventDisabled=null}},Polymer.SCUploadListViewSelectionBehavior=[Polymer.SCUploadListViewSelectionBehaviorImpl],SCUploadListViewSelection=Polymer({is:"sc-upload-listview-selection",behaviors:[Polymer.SCUploadListViewTemplateBehavior,Polymer.SCUploadListViewSelectionBehavior]}),SCUploadListViewFileName=Polymer({is:"sc-upload-listview-filename",behaviors:[Polymer.SCUploadListViewTemplateBehavior],properties:{headerText:{type:String,value:"파일 이름",computed:"__propertyTranslate('headerText', headerText, __i18nLocale)"},dataField:{type:String,value:"name"},styleName:{type:String,value:"fileitem-filename"},flexWidth:{type:Object,value:!0}},_destroy:function(){this.headerText=null,this.dataField=null,this.styleName=null,this.flexWidth=null}}),SCUploadListViewFileSize=Polymer({is:"sc-upload-listview-filesize",behaviors:[Polymer.SCUploadListViewTemplateBehavior],properties:{headerText:{type:String,value:"파일 크기",computed:"__propertyTranslate('headerText', headerText, __i18nLocale)"},dataField:{type:String,value:"size"},styleName:{type:String,value:"fileitem-filesize"}},_bindDataField:function(e){return"[[size2String(item."+e+")]]"},_destroy:function(){this.headerText=null,this.dataField=null,this.styleName=null}}),SCUploadListViewDummy=Polymer({is:"sc-upload-listview-dummy",behaviors:[Polymer.SCUploadListViewTemplateBehavior],properties:{width:{type:Number,value:0},headerEventDisabled:{type:Boolean,value:!0}},generateHeader:function(){var e=this.getDocument().createElement("div");return e.setAttribute("template-id",this.templateId),e},_destroy:function(){this.width=null,this.headerEventDisabled=null}}),Polymer.SCUploadListViewBehaviorImpl=Polymer.Behavior.mixin({listeners:{dblclick:"_onDblClick","interact-drag-start":"_onListViewInteractDragStart","interact-drag":"_onListViewInteractDrag","interact-drag-end":"_onListViewInteractDragEnd"},properties:{listboxItemRenderFn:{type:Function,value:function(){return null}},showFileNameTooltip:{type:Object,value:!1}},get __i18nBundleName(){return this.__i18nBundleName__||(this.__bundleName?this.__i18nBundleName__=this.__bundleName:this.__i18nBundleName__=this.tagName.toLowerCase()),this.__i18nBundleName__},get listboxElement(){return this._listboxEl||(this._listboxEl=this.querySelector("sc-listbox")),this._listboxEl},get listboxTemplateElement(){return this._listboxTemplateEl||(this._listboxTemplateEl=this.listboxElement.querySelector("template")),this._listboxTemplateEl},get listviewHeaderElement(){return this._listviewHeaderEl||(this._listviewHeaderEl=this.querySelector("div.listview-header")),this._listviewHeaderEl},get selectedFiles(){var e=this.listboxElement.querySelectorAll("input[type=checkbox][checked]");if(0==e.length)return[];for(var t,i=this.fileMap,l=[],n=0,o=e.length;n<o;n++)(t=i[Polymer.$Element.up(e[n],"[file-id]").getAttribute("file-id")])&&l.push(t);return l},get listviewContentElement(){return this._listviewContentEl||(this._listviewContentEl=this.querySelector("div.listview-content")),this._listviewContentEl},get selectionAllElement(){return this._selectionAllEl||(this._selectionAllEl=this.querySelector("input[selection-all]")),this._selectionAllEl},get listviewSortedHeaderElement(){return this.listviewHeaderElement.querySelector("div[sort]")},get listviewDummyElement(){return this._listviewDummyEl||(this._listviewDummyEl=this.querySelector("sc-upload-listview-dummy")),this._listviewDummyEl},get uploadTemplates(){if(!this._uploadTemplates){Polymer.dom.flush();for(var e=this.querySelectorAll("[upload-template]"),t=0,i=[];t<e.length;t++)!1!==e[t].visible&&i.push(e[t]);this._uploadTemplates=i}return this._uploadTemplates},get headers(){return this._headers||(this._headers=this.listviewHeaderElement.querySelectorAll("[template-id]")),this._headers},get uploadUtil(){return this._uploadUtil||(this._uploadUtil=SCUploadUtil),this._uploadUtil},get _listViewOffsetWidth(){return this._listViewElOffsetWidth||(this._listViewElOffsetWidth=this.offsetWidth),this._listViewElOffsetWidth},get _listViewOffsetHeight(){return this._listViewElOffsetHeight||(this._listViewElOffsetHeight=this.offsetHeight),this._listViewElOffsetHeight},setSelectItem:function(e){for(var t=this.querySelectorAll("div.fileitem"),i=0;i<t.length;i++){for(var l=!1,n=0;n<e.length;n++)if(t[i].getAttribute("file-id")===e[n].id){l=!0;break}var o=t[i].querySelector("input");l?(o.setAttribute("checked",""),o.checked=!0):(o.removeAttribute("checked"),o.checked=!1)}},_interactPropertiesChanged:function(){var e=[];this.reorderable&&e.push(".listview-header > div"),this.resizable&&e.push(".fileitem-resizer"),e.length&&(this.interactDraggableSelector=e.join(",")),this.interactDraggable=!!e.length},_findTemplateElement:function(e){return this.querySelector('[upload-template][template-id="'+e+'"]')},_generateRowTemplate:function(){var e=this.getDocument(),t=e.createElement("template");return t.innerHTML='<div class="fileitem" file-id$="[[item.id]]"></div>',e.importNode(t.content,!0).firstChild},_prepareTemplatize:function(){for(var e,t=this.getDocument().createDocumentFragment(),i=this._generateRowTemplate(),l=this.uploadTemplates,n=0,o=l.length;n<o;n++)e=l[n],this.hideStateColumn&&e instanceof SCUploadListViewState||i.appendChild(e.generateTemplate());t.appendChild(i),this.listboxTemplateElement._content=t,this.listboxElement.lazyTemplatized=!1},_computedFlexWidth:function(){for(var e,t=this.uploadTemplates,i=0,l=0,n=0,o=t.length;n<o;n++)(e=t[n]).isFlexWidth()?l++:i+=e.width;return 0<l?(this._listViewOffsetWidth-i)/l:0},_renderHeaders:function(){var e=this.listviewHeaderElement,t=document.createDocumentFragment();templates=this.uploadTemplates,flexWidth=this._computedFlexWidth();for(var i,l,n=position=0,o=templates.length;n<o;n++)i=templates[n],this.hideStateColumn&&i instanceof SCUploadListViewState||(l=i.generateHeader(),this.hideSelectionColumn&&i instanceof SCUploadListViewSelection&&(l.hidden=this.hideSelectionColumn),!l.hidden&&i.isFlexWidth()&&(i.width=flexWidth),l.hidden||(l.style.cssText="left: "+position+"px; width: "+i.width+"px;",position+=i.width),t.appendChild(l));e.appendChild(t),this.listen(e,"click","_onHeaderClick")},_prepare:function(){this._bind(),this._renderHeaders(),this._prepareTemplatize(),this.listen(this.listviewContentElement,"scroll","_onListviewScroll"),this.listen(this,"value-changed","_onCustomFieldValueChanged",{useCapture:!0}),Polymer.SCUploadViewBehaviorImpl._prepare.call(this)},_filesChanged:function(){var e,t;this.isAvailable&&(e=this.sortDataField,t=this.sortDirection,Polymer.$Util.isEmpty(e)||Polymer.$Util.isEmpty(t)||this.sort(e,t))},_selectionChanged:function(){var e=this.selectedFiles,t=e.length,e=e.filter(function(e){return e.state===smtutil.File.prototype.FILE_SUCCEED}),i=e.length;this.fire(t?"file-select":"file-deselect",{selectedCount:t,selectedFiles:this.selectedFiles,selectedRemoteFiles:e,selectedRemoteCount:i},{bubbles:!1})},_computedDropInfo:function(e){return!!this.files.length||!this.editable},_computedAllSelectionDisabled:function(e){return!this.files.length},_onCustomFieldValueChanged:function(e){for(var t=e.target,i=t.getAttribute("file-id"),l=t.getAttribute("file-data-field"),n=0;n<this.files.length;n++)if(this.files[n].id==i){this.files[n][l]=t.value;break}},_listboxItemRender:function(e,t){for(var i,l,n=this.listboxElement.querySelectorAll('[template-id="'+e.templateId+'"]'),o=0,s=n.length;o<s;o++)(i=n[o]).firstChild&&i.firstChild instanceof SCTextField?((l=i.firstChild).value=this.files[o][i.getAttribute("data-field")],l.setAttribute("file-id",this.files[o].id),l.setAttribute("file-data-field",i.getAttribute("data-field")),e.maxLength&&(l.maxLength=e.maxLength),e.maskRe&&(l.maskRe=e.maskRe),e.stripCharsRe&&(l.stripCharsRe=e.stripCharsRe),e.formatType&&(l.inputCover=!0,l.formatType=e.formatType),l.addEventListener("dblclick",function(e){e.stopPropagation()},!1)):i.firstChild&&i.firstChild instanceof SCComboBoxField&&((l=i.firstChild).items=e.items,l.displayField=e.displayField,l.valueField=e.valueField,l.setAttribute("file-id",this.files[o].id),l.setAttribute("file-data-field",i.getAttribute("data-field")),l.value=this.files[o][i.getAttribute("data-field")],l.addEventListener("dblclick",function(e){e.stopPropagation()},!1)),this.listboxItemRenderFn&&this.listboxItemRenderFn(i,this.files[o]),i.style.cssText="width: "+e.width+"px; left: "+t+"px;"},_interactDraggableTransform:function(e,t,i){var l,n;if(this._listviewInteractReordering)this._listviewInteractReordering.ghost.webkitTransform=this._listviewInteractReordering.ghost.style.transform="translate("+t+"px)";else{if(headerElement=Polymer.$Element.up(e,"[data-field]"),l=Number(headerElement.dataset.originWidth)+t,(n=this._findTemplateElement(headerElement.getAttribute("template-id"))).minWidth>l)return;n.width=l,n.isFlexWidth()&&(n.flexWidth=!1),this._onListboxRender()}e.setAttribute("data-x",t)},_isResizer:function(e){return e.classList.contains("fileitem-resizer")},_onListviewScroll:function(e){this.listviewHeaderElement.scrollLeft=e.target.scrollLeft},_onListViewInteractDragStart:function(e){var t,i,l=e.detail.target;if(this._isResizer(l)){if(t=Polymer.$Element.up(e.detail.target,"[template-id]"),(i=this._findTemplateElement(t.getAttribute("template-id"))).headerEventDisabled||!this.resizable&&!i.resizable)return void e.preventDefault();t.dataset.originWidth=t.offsetWidth,this._listviewInteractResizing=!0}else{if((i=this._findTemplateElement(l.getAttribute("template-id"))).headerEventDisabled||!this.reorderable&&!i.reorderable)return void e.preventDefault();(t=l.cloneNode(!0)).classList.add("ghost"),(i=this.getDocument().createElement("div")).classList.add("marker"),this.appendChild(i),this.appendChild(t),i.dataset.width=getComputedStyle(i).fontSize.replace("px",""),this._listviewInteractReordering={ghost:t,marker:i}}this.unlisten(this.listviewHeaderElement,"click","_onHeaderClick")},_onListViewInteractDrag:function(e){var t,i,l,n=e.detail.clientX,o=e.detail.clientY,s=this.listviewHeaderElement.getBoundingClientRect(),a=0<(parseFloat(e.detail.target.getAttribute("data-x"))||0)+e.detail.dx;if(this._listviewInteractReordering)if(l=this._listviewInteractReordering.marker,t=this.headers,s.top<o&&s.bottom>o){for(var r=1,d=t.length;r<d;r++)if((i=t[r])!==e.detail.target){var h=Number(i.dataset.left),u=Number(i.dataset.right),p=Number(i.dataset.width),c=Number(i.dataset.headerElementLeft);if(!a&&h<n&&n<h+p/2){i.setAttribute("reorder-target",!0),l.style.display="block",l.style.left=h-c+"px";break}if(a&&n<u&&h+p/2<n){i.setAttribute("reorder-target",!0),l.style.display="block",l.style.left=u-c-Number(l.dataset.width)+"px";break}l.style.display="none",i.removeAttribute("reorder-target")}}else(i=this.listviewHeaderElement.querySelector("[reorder-target]"))&&i.removeAttribute("reorder-target"),l.style.display="none"},_onListViewInteractDragEnd:function(e){var t,i,l,n,o=this.listviewHeaderElement;this._listviewInteractReordering&&((t=this.querySelector("[reorder-target]"))&&(t.removeAttribute("reorder-target"),i=e.detail.target,l=this._findTemplateElement(t.getAttribute("template-id")),n=this._findTemplateElement(i.getAttribute("template-id")),o.removeChild(i),this.removeChild(n),!(Number(l.dataset.index)>Number(n.dataset.index))||(l=this.uploadTemplates[Number(l.dataset.index)+1])?(o.insertBefore(i,t),this.insertBefore(n,l)):(o.appendChild(i),this.appendChild(n)),this._headers.length=0,this._headers=null,this._uploadTemplates.length=0,this._uploadTemplates=null,this._onListboxRender()),this.removeChild(this._listviewInteractReordering.marker),this.removeChild(this._listviewInteractReordering.ghost)),delete this._listviewInteractResizing,delete this._listviewInteractReordering,e.detail.target.removeAttribute("data-x"),this.async(function(){this.listen(this.listviewHeaderElement,"click","_onHeaderClick")}.bind(this),1)},_onHeaderClick:function(e){var e=Polymer.$Element.up(e.target,"div"),t=this._findTemplateElement(e.getAttribute("template-id"));t&&!t.headerEventDisabled&&(this.sortDataField=e.getAttribute("data-field"),this.sortDirection="asc"==e.getAttribute("sort")?"desc":"asc")},_onDownload:function(e){var t,i=Polymer.$Element.up(e.target,".fileitem");this.doubleClickDownload&&i&&(t=i.querySelector(".fileitem-selection"),i=i.getAttribute("file-id"),t.contains(e.target)||this.fire("download",i,{bubbles:!1}))},_onSelectionClick:function(e){var e=e.target,t=!e.hasAttribute("checked");this.fileMap,this.isSelectionClick=!0,e.checked=t,this.toggleAttribute("checked",t,e),this.selectionAllElement&&(this.selectionAllElement.checked=this.selectedFileCount===this.files.length),this._selectionChanged()},_onAllSelectionChange:function(e){for(var t,i=e.detail,l=this.listboxElement.querySelectorAll(".fileitem-selection input"),n=0,o=l.length;n<o;n++)(t=l[n]).checked=i,this.toggleAttribute("checked",i,t);this._selectionChanged()},_onDblClick:function(e){(e.target.classList.contains("droptext")||this.listboxElement.contains(e.target)&&!Polymer.$Element.up(e.target,"[file-id]"))&&this.fire("add",e,{bubbles:!1})},_onListViewListBoxRender:function(e){this.listboxElement.hidden=!0,this.debounce("_debounceListViewListBoxRender",this._onListboxRender,16)},_onListboxRender:function(e){var t,i,l,n,o,s=0;if(!this._isDestroyed&&this.isVisible(!0)){this.listboxElement.hidden=!0,i=(t=this.listviewHeaderElement).offsetLeft,l=this.listviewContentElement,n=this.uploadTemplates,o=l.scrollHeight>l.offsetHeight?Polymer.$Element.getScrollbarSize().width:0,this.listviewDummyElement.width=o;for(var a,r,d,h=this._computedFlexWidth(),u=0,p=n.length;u<p;u++)a=n[u],this.hideStateColumn&&a instanceof SCUploadListViewState||(a.dataset.index=u,r=t.querySelector('[template-id="'+a.templateId+'"]'),a instanceof SCUploadListViewSelection&&(r.hidden=this.hideSelectionColumn,this.hideSelectionColumn))||(a.isFlexWidth()&&(a.width=Math.max(h,a.minWidth)),this._listboxItemRender(a,s),r.style.cssText="left: "+s+"px; width: "+a.width+"px;",d=r.getBoundingClientRect(),r.dataset.left=d.left,r.dataset.right=d.right,r.dataset.width=a.width,r.dataset.headerElementLeft=i,s+=a.width);this.listboxElement.style.width=Math.max(s,l.offsetWidth)-o+"px",this.selectionAllElement&&(this.selectionAllElement.checked=0!==this.selectedFileCount&&this.selectedFileCount===this.files.length),this._selectionChanged(),this.listboxElement.hidden=!1,""===this.domHost.hideToolbar&&(this.domHost.hideToolbar=!0),this.domHost._hideToolbarChanged(this.domHost.hideToolbar)}},_onListboxItemSelect:function(e){e.detail.element&&(this.isSelectionClick||this.fire("item-select",e.detail.index,{bubbles:!1}),this.isSelectionClick=!1)},size2String:function(e){return this.uploadUtil.byteToDisplaySize(e,this._boundByteToFormattedDisplaySize)},sort:function(e,t){var i,l;this.sortable&&(i=this.querySelector("[data-field="+e+"]"),(l=this.listviewSortedHeaderElement)&&l.removeAttribute("sort"),i&&(l=this.querySelector('div[template-id="'+i.getAttribute("template-id")+'"]'))&&l.setAttribute("sort",t),Polymer.SCUploadViewBehaviorImpl.sort.call(this,e,t),this.listboxElement.render())},doContentElementResize:function(){!this._isDestroyed&&this.isVisible(!0)&&(this._isPrepared&&this.debounce("_debounceListViewListBoxRender",this._onListboxRender,16),this._listViewElOffsetWidth=null,this._listViewElOffsetHeight=null,this.listviewContentElement.style.height=this._listViewOffsetHeight-this.listviewHeaderElement.offsetHeight+"px")},_bind:function(){var e,t=this.domHost;(e=t instanceof SCUpload?t:e)&&e.listboxItemRenderFn&&(this.listboxItemRenderFn=e.domHost[e.listboxItemRenderFn])},_destroy:function(){this._commonDestroy(),this.unlisten(this.listviewHeaderElement,"click","_onHeaderClick"),this.unlisten(this.listviewContentElement,"scroll","_onListviewScroll"),this.unlisten(this,"value-changed","_onCustomFieldValueChanged",{useCapture:!0}),this._headers&&(this._headers.length=0,this._headers=null),this._listviewContentEl=null,this._listviewHeaderEl=null,this._listboxEl=null,this._listboxTemplateEl._content=null,this._listboxTemplateEl=null,this._listviewDummyEl=null,this._listViewElOffsetWidth=null,this._listViewElOffsetHeight=null}},function(){if(!0===Polymer.Settings.useStyleCacheBehavior)return{_clearStyleCache:function(){this._listViewElOffsetHeight=null,this._listViewElOffsetWidth=null}}}),Polymer.SCUploadListViewBehavior=Polymer.Behavior.concat([Polymer.SCUploadListViewBehaviorImpl],SCStyleManager.getStyleCacheBehavior),SCUploadListView=Polymer({is:"sc-upload-listview",behaviors:[Polymer.SCInteractDraggableBehavior,Polymer.SCUploadViewBehavior,Polymer.SCUploadListViewBehavior]}),Polymer({is:"sc-upload-thumbnail-box",properties:{index:{type:Object},thumbnailRequestUrl:{type:String,value:function(){return"/attachment/thumbnail.do"}},fileDesc:{type:Object,observer:"_onChangeFileDescriptor"},stateIconClass:{type:Object},supportedImageExtension:{type:Object,value:function(){return["png","bmp"]}},isSelected:{type:Object,value:function(){return!1}}},listeners:{click:"_onClickThumbnailBox"},setValue:function(e){this.querySelector(".select-button").value=e,this.isSelected=e},setSize:function(e,t){this.querySelector(".thumbnail-wrapper").style.width=e+"px",this.querySelector(".thumbnail-wrapper").style.height=t+"px",this.querySelector(".filename").style.width=e+"px"},_onClickThumbnail:function(){this.fire("item-select",this.index,{bubbles:!1})},_onClickCheck:function(e){e.stopPropagation(),e.preventDefault(),this.isSelected=e.currentTarget.checked,this.fire("check-thumbnail")},_onChangeFileDescriptor:function(e){var i=this,t=this.thumbnailWidth||200,l=this.thumbnailHeight||200;e&&(e.extension?-1===e.type.indexOf("image")?this._setUndefinedThumbnail(e):(this.$.thumbnailRequest.body={id:e.id,width:t,height:l},this.$.thumbnailRequest.generateRequest()):-1!==e.type.indexOf("image")?((t=new FileReader).onload=(e.orgFile,function(e){var t=document.createElement("img");t.src=e.target.result,i.thumbnailWidth&&i.thumbnailHeight&&(i.querySelector(".thumbnail").style.width=i.thumbnailWidth+"px",i.querySelector(".thumbnail").style.height=i.thumbnailHeight-20+"px",i.querySelector(".filename").style.width=i.thumbnailWidth+"px"),i.querySelector(".thumbnail").appendChild(t)}),t.readAsDataURL(e.orgFile)):(t=(l=e.name.split("."))[l.length-1],this._setUndefinedThumbnail({extension:t})))},_setUndefinedThumbnail:function(e){var t=this.querySelector(".thumbnail"),i=document.createElement("div"),l=(i.classList.add("thumbnail-container"),document.createElement("i")),n=(l.classList.add("fa"),l.classList.add("fa-file-o"),l.classList.add("font-icon"),this.thumbnailWidth&&this.thumbnailHeight&&(l.style.fontSize=this.thumbnailHeight-30+"px"),document.createElement("span"));n.classList.add("thumbnail-name"),n.innerHTML=e.extension,i.appendChild(l),i.appendChild(n),t.appendChild(i),this.thumbnailWidth&&this.thumbnailHeight&&(t.style.width=this.thumbnailWidth+"px",t.style.height=this.thumbnailHeight-20+"px",this.querySelector(".filename").style.width=this.thumbnailWidth+"px")},_onClickThumbnailBox:function(e){e.preventDefault(),e.stopPropagation(),this.fire("click-thumbnail",this.fileDesc)},_onResponseThumbnail:function(e,t){var i=document.createElement("img");i.src=t.response.thumbnail,this.thumbnailWidth&&this.thumbnailHeight&&(i.style.width=this.thumbnailWidth+"px",i.style.height=this.thumbnailHeight-30+"px",this.querySelector(".thumbnail").style.width=this.thumbnailWidth+"px",this.querySelector(".thumbnail").style.height=this.thumbnailHeight-20+"px",this.querySelector(".filename").style.width=this.thumbnailWidth+"px"),this.querySelector(".thumbnail").appendChild(i)},_destroy:function(){this.fileDesc=null,this.index=null,this.stateIconClass=null,this.supportedImageExtension=null,this.isSelected=null}}),SCUploadthumbnailView=Polymer({is:"sc-upload-thumbnailview",behaviors:[Polymer.SCInteractDraggableBehavior,Polymer.SCUploadViewBehavior],properties:{thumbnailInfo:{type:Array,value:function(){return{}}},tmpFileList:{type:Object}},listeners:{"click-thumbnail":"_onClickThumbnail",dblclick:"_onDblClick","check-thumbnail":"_selectionChanged"},get selectedFiles(){for(var e=this.querySelector(".sc-upload-thumbnail-list").children,t=[],i=0;i<e.length;i++)e[i].isSelected&&t.push(e[i].fileDesc);return t},sort:function(e,t){Polymer.SCUploadViewBehaviorImpl.sort.call(this,e,t),this._renderThumbnailView(this._files,this.querySelector(".sc-upload-thumbnail-list"))},doContentElementResize:function(){},_interactPropertiesChanged:function(){},_interactPropertiesChanged:function(){},setSelectItem:function(e){this.tmpFileList=e},_setSelectItem:function(e){for(var t=this.querySelector(".sc-upload-thumbnail-list").children,i=0;i<t.length;i++){for(var l=!1,n=0;n<e.length;n++)if(t[i].fileDesc.id===e[n].id){l=!0;break}t[i].setValue(l)}},_filesChanged:function(e){if(this.isAvailable){this._collection&&this._collection.destroy(),this._collection=Polymer.Collection.get(this.files);var t=this.sortDataField,i=this.sortDirection,t=(Polymer.$Util.isEmpty(t)||Polymer.$Util.isEmpty(i)||this.sort(t,i),this.querySelector(".sc-upload-thumbnail-list")),i=!0;if(this.oldList&&this.oldList.length===this.files.length){for(var l=!1,n=0;n<this.files.length;n++){for(var o=!1,s=0;s<this.oldList.length;s++)if(this.oldList[s]===this.files[n].id){o=!0;break}if(!o){l=!0;break}}l||(i=!1)}i&&this._renderThumbnailView(e,t),this.tmpFileList&&(this._setSelectItem(this.tmpFileList),this.tmpFileList=void 0)}},_renderThumbnailView:function(e,t){if(this.thumbnailBoxItemSelectHandler=function(e){this.fire("item-select",e.detail,{bubbles:!1})}.bind(this),e){for(var i=e.indexSplices[0].removed,l=0;l<i.length;l++)for(var n=t.children.length-1;0<=n;n--)if(t.children[n].fileDesc.id===i[l].id){t.removeChild(t.children[n]);break}for(var o=e.keySplices[0].added,l=0;l<o.length;l++){var s=parseInt(o[l].replace("#","")),a=this.files[s];(d=document.createElement("sc-upload-thumbnail-box")).thumbnailWidth=this.thumbnailWidth,d.thumbnailHeight=this.thumbnailHeight,d.headers=this.headers,d.fileDesc=a,d.stateIconClass=this.getStateImage(a.state),d.index=s,d.addEventListener("item-select",this.thumbnailBoxItemSelectHandler),t.appendChild(d),this.thumbnailWidth&&this.thumbnailHeight&&d.setSize(this.thumbnailWidth,this.thumbnailHeight)}if(0<o.length)for(var r=t.children,l=0;l<r.length;l++)r[l].setValue(!1)}else{t.innerHTML="";for(var d,l=0;l<this.files.length;l++)(d=document.createElement("sc-upload-thumbnail-box")).thumbnailWidth=this.thumbnailWidth,d.thumbnailHeight=this.thumbnailHeight,d.headers=this.headers,d.fileDesc=this.files[l],d.stateIconClass=this.getStateImage(this.files[l].state),d.index=l,d.addEventListener("item-select",this.thumbnailBoxItemSelectHandler),t.appendChild(d),this.thumbnailWidth&&this.thumbnailHeight&&d.setSize(this.thumbnailWidth,this.thumbnailHeight)}this.oldList=[];for(l=0;l<this.files.length;l++)this.oldList.push(this.files[l].id);this._selectionChanged()},_onDblClick:function(e){var t=e.target;!t.classList.contains("droptext")&&Polymer.$Element.up(t,".thumbnail-wrapper")||this.fire("add",e,{bubbles:!1})},_selectionChanged:function(){var e=this.selectedFiles,t=e.length,e=e.filter(function(e){return e.state===smtutil.File.prototype.FILE_SUCCEED}),i=e.length;this.fire(t?"select":"deselect",{selectedCount:t,selectedFiles:this.selectedFiles,selectedRemoteFiles:e,selectedRemoteCount:i},{bubbles:!1})},_onClickThumbnail:function(e,t){e.stopPropagation(),e.preventDefault();var i=this.querySelector("sc-upload-thumbnail-box.selected");i&&i.classList.toggle("selected"),e.target.classList.toggle("selected"),this.fire("click-item",t)},_onDownload:function(e){var t,i=Polymer.$Element.up(e.target,"sc-upload-thumbnail-box");this.doubleClickDownload&&i&&(t=i.querySelector("sc-checkbox-field.select-button"),i=i.fileDesc.id,t.contains(e.target)||this.fire("download",i,{bubbles:!1}))},_destroy:function(){this._commonDestroy();for(var e=this.querySelectorAll("sc-upload-thumbnail-box"),t=0;t<e.length;t++)e[t].removeEventListener("item-select",this.thumbnailBoxItemSelectHandler),e[t].fileDesc=null,e[t].stateIconClass=null,e[t].index=null,e[t].parentNode.removeChild(e[t]),e[t].destroy&&e[t].destroy();this.thumbnailBoxItemSelectHandler=e=null,this.thumbnailInfo=null,this.tmpFileList=null,this.selectedFiles=null,this.files=null,this.oldList=null,this._collection&&(this._collection.destroy(),this._collection=null)}}),SCUploadProgressPopup=Polymer({is:"sc-upload-progress-popup",properties:{_boundByteToFormattedDisplaySize:{type:Function,value:function(){return SCUploadUtil.byteToFormattedDisplaySize.bind(SCUploadUtil,"{0} {1}")}},totalFileCount:{type:Number,value:0},totalFileSize:{type:Number,value:0},uploadedFileCount:{type:Number,value:0},uploadedFileSize:{type:Number,value:0},_uploadedState:{type:Number,value:3},_files:{type:Array,value:function(){return[]}},uploadTotalProgressText:{type:String,computed:"__propertyTranslate('uploadTotalProgressText', uploadTotalProgressText, __i18nLocale)",value:"업로드 진행 상태"},uploadTotalFileText:{type:String,computed:"__propertyTranslate('uploadTotalFileText', uploadTotalFileText, __i18nLocale)",value:"업로드 수"},uploadTotalSizeText:{type:String,computed:"__propertyTranslate('uploadTotalSizeText', uploadTotalSizeText, __i18nLocale)",value:"업로드 크기"},uploadFileNameText:{type:String,computed:"__propertyTranslate('uploadFileNameText', uploadFileNameText, __i18nLocale)",value:"파일 이름"},uploadProgressText:{type:String,computed:"__propertyTranslate('uploadProgressText', uploadProgressText, __i18nLocale)",value:"진행 상태"},uploadFileSizeText:{type:String,computed:"__propertyTranslate('uploadFileSizeText', uploadFileSizeText, __i18nLocale)",value:"파일 크기"}},get __bundleName(){return"component.sc-upload"},get __i18nBundleName(){return this.__i18nBundleName__||(this.__bundleName?this.__i18nBundleName__=this.__bundleName:this.__i18nBundleName__=this.tagName.toLowerCase()),this.__i18nBundleName__},get _progressElement(){var e;return this._progressEl||(e=document.getElementsByClassName("fileStatusTable")[document.getElementsByClassName("fileStatusTable").length-1],this._progressEl=e.getElementsByClassName("totalProgress")[0]),this._progressEl},_size2String:function(e){return SCUploadUtil.byteToDisplaySize(e,this._boundByteToFormattedDisplaySize)},_init:function(){this._progressElement.style.width="0%",this._progressElement.innerText=0,this.uploadedFileCount=0,this.uploadedFileSize=0,this.totalFileCount=0,this.totalFileSize=0},_setFileInfo:function(e){this.totalFileCount=e.length;for(var t=0;t<this.totalFileCount;t++)this.totalFileSize+=e[t].size},_onListboxRender:function(e){var t=this.$.progressPopupListbox.getBoundingClientRect(),i=t.height,l=this.querySelector(".header-filesize").getBoundingClientRect().width,n=this.$.progressPopupListbox.scrollHeight,o=this.$.progressPopupListbox.scrollWidth;if(i<n)for(var s,a=t.width-o,r=0,d=(s=this.$.progressPopupListbox.querySelectorAll(".list-filesize")).length;r<d;r++)s[r].style.width=l-a+"px"},setParam:function(e){this._init(),this._files=e,this._setFileInfo(e)},addAdditionalFileInfo:function(e){var t=["_files"];this.totalFileCount+=e.length;for(var i=0;i<e.length;i++)t.push(e[i]),this.totalFileSize+=e[i].size;this.push.apply(this,t)},progressChanged:function(e,t){var e=this.$.progressPopupListbox.querySelector('[file-id="'+e+'"]');e&&(e=e.getElementsByClassName("fileProgress")[0],t=Math.round(t),e.style.width=t+"%",e.innerText=t+"%")},totalProgressChanged:function(e){e=Math.round(e)+"%";this._progressElement.style.width=e,this._progressElement.innerText=e},_interactPropertiesChanged:function(){},updateUploadingInfo:function(e,t){var i=this._files.length;if(t.state==this._uploadedState&&this.prevFileId!==t.id){for(var l=0;l<i;l++)t.id==this._files[l].id&&(this.uploadedFileSize+=this._files[l].size);this.uploadedFileCount++,this.prevFileId=t.id}},_destroy:function(){this._progressEl=null,this.uploadedFileCount=null,this.uploadedFileSize=null,this.totalFileCount=null,this.totalFileSize=null,this._uploadedState=null,this._files=null,this._boundByteToFormattedDisplaySize=null}}),function(){var e,d,h,t,i,u,l,n,o="1.1.8.03",p=(Polymer.$Version?(Polymer.Version=Polymer.Base.mixin(Polymer.Version||{},{"sc-upload":(s=Polymer.Settings.Version)&&s["sc-upload"]?new Polymer.$Version(s["sc-upload"]):new Polymer.$Version("5.1.0")}),Polymer.getVersion("sc-component").isLessThan(o)&&console.warn("sc-upload-"+Polymer.getVersion("sc-upload").version+" requires sc-component-"+o+" or later.")):console.warn("sc-upload-5.1.0 requires sc-component-"+o+" or later."),Polymer.getDocument()),s=p.querySelector("meta[name=_csrf]"),a=s?{csrf:s.content,csrfHeader:p.querySelector("meta[name=_csrf_header]").content,csrfParameter:p.querySelector("meta[name=_csrf_parameter]").content}:void 0,r="default",c=(o=a,l={maxFileSize:"10MB",minFileSize:"0bytes",maxTotalFileSize:"100MB",maxTotalFileCount:100,extension:void 0,restrictFileName:"html,jsp,java,class,js,exe",preventDuplicate:!1,autoUpload:!1,uploadtype:"async",configUploaderUrl:"attachment/management/config.do",uploaderUrl:"attachment/upload.do",loadFileUrl:"attachment/list.do",deleteFileUrl:"attachment/delete.do",updateFileUrl:"attachment/update.do",downloadFileUrl:"attachment/download.do",downloadZipFileUrl:"attachment/downloadZip.do"},(n=new XMLHttpRequest).open("POST","/attachment/management/config.do",!1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json"),o&&n.setRequestHeader(o.csrfHeader,o.csrf),n.addEventListener("loadend",function(e){var t,i;200===n.status?(n.responseType||n._responseType,t=!n.responseType,i=void(n._jsonPrefix&&n._jsonPrefix.length),i=t||void 0===n.response?JSON.parse(n.responseText):e.response,r=i.defaultStorageId,l=i.storageLmtMap):SCAjax.prototype.ajaxExceptionHandler(new function(e,t,i){this.name="ajaxException",this.message=e,this.code=t,this.xhr=i}("",n.status,n))}),n.addEventListener("error",function(e){}),n.send(null),l),m=(d=a,t=navigator.userAgent,i=function(e){e=e.target;return e.hasAttribute("created")?void e.removeAttribute("created"):(SCAlert.show(e.dataset.alertTitleText,e.dataset.downloadErrorText,null,null,!0),e.removeEventListener("load",i),p.body.removeChild(e),void(h=u(!0)))},{_phones:{iPhone:"\\biPhone\\b|\\biPod\\b"},_tablets:{iPad:"iPad|iPad.*Mobile"},_isMobile:function(){return this._isAppleMobile()},_isAppleMobile:function(){return this._isIPhone()||this._isIPad()},_isIPad:function(){return new RegExp(this._tablets.iPad,"i").test(t)},_isIPhone:function(){return new RegExp(this._phones.iPhone,"i").test(t)},downloadUsingFetch:function(e,t,i,l,n){for(var o=[],s=0;s<t.length;s++)o.push(encodeURIComponent(t[s]));if(Polymer.$Util.isObject(l))for(var a in l)o.push(a+"="+encodeURIComponent(l[a]));i&&o.push("storageId="+encodeURIComponent(i));var n=SCUploadUtil.findDownloadLogParameter(n,window.SCUploadDownloadParameter||window.SCMdiManager&&window.SCMdiManager.getCurrentMenuId.bind(window.SCMdiManager)),i=(o.push("menucode="+encodeURIComponent(n)),o=o.join("&"),"storageId="+encodeURIComponent(i)+"&menucode="+encodeURIComponent(n)),n=(t&&(1==t.length?i+="&id="+JSON.stringify(t[0]):1<t.length&&(i+="&ids="+encodeURIComponent(t))),e+"?"+i),r=new XMLHttpRequest;r.open("GET",n,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("Content-Range","0-"),d&&r.setRequestHeader(d.csrfHeader,d.csrf),r.addEventListener("loadend",function(e){var t,i;200===r.status?(t=new Blob([r.response],{type:"application/octet-stream"}),(i=p.createElement("a")).href=window.URL.createObjectURL(t),i.download=decodeURIComponent(r.getResponseHeader("File-Name")),p.body.appendChild(i),i.click(),p.body.removeChild(i)):(console.error(r.response),SCAlert.show("다운로드 오류","다운로드 오류가 발생했습니다."))}),r.addEventListener("error",function(e){console.error("Network error"),SCAlert.show("다운로드 오류","다운로드 연결 오류가 발생했습니다.")}),r.send()},download:function(e,t,i,l,n){var o,s=(h=h||u()).contentDocument,a=s.createElement("form");if(h.dataset.alertTitleText=n.alertTitleText,h.dataset.downloadErrorText=n.downloadErrorText,1===t.length?((o=s.createElement("input")).name="id",o.value=t[0]):((o=s.createElement("input")).name="ids",o.value=t),a.appendChild(o),d&&((o=s.createElement("input")).name=d.csrfParameter,o.value=d.csrf,a.appendChild(o)),Polymer.$Util.isObject(l))for(var r in l)(o=s.createElement("input")).name=r,o.value=l[r],a.appendChild(o);(o=s.createElement("input")).name="menucode",o.value=SCUploadUtil.findDownloadLogParameter(n,window.SCUploadDownloadParameter||window.SCMdiManager&&window.SCMdiManager.getCurrentMenuId.bind(window.SCMdiManager)),a.appendChild(o),a.method=n.useGetDownload?"GET":"POST",a.action=e,a.style.display="none",this._isAppleMobile()&&(t="downloader-"+Polymer.SCAutoGenIdBehavior.generateId(!0),window.open("about:blank",t),a.target=t),s.body.appendChild(a),a.submit(),s.body.removeChild(a)}}),_=!(u=function(e){var t=p.createElement("iframe");return t.id="sc-download-"+Polymer.SCAutoGenIdBehavior.generateId(!0),t.title=I18N.translate("component.sc-upload.fileDownloader"),t.style.display="none",(e||window.Polymer.isChrome)&&t.setAttribute("created",!0),t.addEventListener("load",i),p.body.appendChild(t),t}),f=(Object.defineProperty(y.prototype,"popup",{get:function(){return e=e&&!e._isDestroyed?e:SCPopupManager.popup("sc-upload-progress-popup",this,600,300,{modal:!0,closable:!1,maximizable:!1,draggable:!1,resizable:!1,collapsible:!1,i18nDisabled:!1,resizeOnBrowserResize:!0,refitOnBrowserResize:!0,titleText:"Upload Progress"})}}),Polymer.onDestroy(function(){e=null}),new y);function y(){}Polymer.onDestroy(function(){c=a=p=m=f=null}),c[r].extension&&(smtupload.Uploader.prototype.config.mimeTypes=[{title:"Custom files",extensions:c[r].extension}]),Polymer.SCUploadBehaviorImpl=Polymer.Behavior.mixin({properties:{useServerGroupId:{type:Object,value:function(){return!0}},_boundByteToFormattedDisplaySize:{type:Function,value:function(){return SCUploadUtil.byteToFormattedDisplaySize.bind(SCUploadUtil,"{0} {1}")}},useFetchDownload:{type:Object,value:function(){return!1}},useGetDownload:{type:Object,value:function(){return!1}},showFileNameTooltip:{type:Object,value:!1},storageId:{type:String,value:function(){return r}},maxTotalFileCount:{type:Number,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).maxTotalFileCount}},maxTotalFileSize:{type:String,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).maxTotalFileSize}},maxFileSize:{type:String,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).maxFileSize}},minFileSize:{type:String,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).minFileSize}},extension:{type:String,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).extension}},allowAllExtension:{type:Object,value:function(){return!1}},restrictFileName:{type:String,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).restrictFileName}},addText:{type:String,computed:"__propertyTranslate('addText', addText, __i18nLocale)",value:"파일추가"},uploadText:{type:String,computed:"__propertyTranslate('uploadText', uploadText, __i18nLocale)",value:"업로드"},updateText:{type:String,computed:"__propertyTranslate('updateText', updateText, __i18nLocale)",value:"수정"},deleteText:{type:String,computed:"__propertyTranslate('deleteText', deleteText, __i18nLocale)",value:"삭제"},downloadText:{type:String,computed:"__propertyTranslate('downloadText', downloadText, __i18nLocale)",value:"다운로드"},dropText:{type:String,computed:"__propertyTranslate('dropText', dropText, __i18nLocale)",value:"이곳을 더블클릭 또는 파일을 드래그 하세요."},alertTitleText:{type:String,computed:"__propertyTranslate('alertTitleText', alertTitleText, __i18nLocale)",value:"알림"},confirmTitleText:{type:String,computed:"__propertyTranslate('confirmTitleText', confirmTitleText, __i18nLocale)",value:"확인"},maximumText:{type:String,computed:"__propertyTranslate('maximumText', maximumText, __i18nLocale)",value:"최대"},unitText:{type:String,computed:"__propertyTranslate('unitText', unitText, __i18nLocale)",value:"개"},totalText:{type:String,computed:"__propertyTranslate('totalText', totalText, __i18nLocale)",value:"총"},limitedText:{type:String,computed:"__propertyTranslate('limitedText', limitedText, __i18nLocale)",value:"제한"},unlimitedText:{type:String,computed:"__propertyTranslate('unlimitedText', unlimitedText, __i18nLocale)",value:"무제한"},deleteConfirmText:{type:String,computed:"__propertyTranslate('deleteConfirmText', deleteConfirmText, __i18nLocale)",value:"파일을 삭제하시겠습니까?"},uploadFailedText:{type:String,computed:"__propertyTranslate('uploadFailedText', uploadFailedText, __i18nLocale)",value:"파일 업로드에 실패하였습니다."},downloadErrorText:{type:String,computed:"__propertyTranslate('downloadErrorText', downloadErrorText, __i18nLocale)",value:"파일 다운로드 오류가 발생하였습니다."},autoUpload:{type:Boolean,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).autoUpload}},autoDelete:{type:Boolean,value:function(){return!1}},uploadtype:{type:String,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).uploadtype}},preventDuplicate:{type:Boolean,value:function(){return(UT.isEmpty(this.storageId)?c[r]:c[this.storageId]).preventDuplicate}},headers:{type:Object,value:function(){return{}}},parameters:{type:Object,value:function(){return{}}},uploaderUrl:{type:String,value:"attachment/upload.do"},loadFileUrl:{type:String,value:"attachment/list.do"},deleteFileUrl:{type:String,value:"attachment/delete.do"},updateFileUrl:{type:String,value:"attachment/update.do"},downloadFileUrl:{type:String,value:"attachment/download.do"},downloadZipFileUrl:{type:String,value:"attachment/downloadZip.do"},customFilter:{type:String},_boundFileAddedHandler:{type:Function,value:function(){return this._onFileAdded.bind(this)}},_boundFilterErrorHandler:{type:Function,value:function(){return this._onFilterError.bind(this)}},_boundFileStateChangedHandler:{type:Function,value:function(){return this._onFileStateChanged.bind(this)}},_boundFileDeletedHandler:{type:Function,value:function(){return this._onFileDeleted.bind(this)}},_boundDragOverHandler:{type:Function,value:function(){return this._onDragOver.bind(this)}},_boundDragEnterHandler:{type:Function,value:function(){return this._onDragEnter.bind(this)}},_boundOnDropHandler:{type:Function,value:function(){return this._onDrop.bind(this)}},_boundFileUploadProgressChangedHandler:{type:Function,value:function(){return this._onFileUploadProgressChanged.bind(this)}},_boundUploadProgressChangedHandler:{type:Function,value:function(){return this._onUploadProgressChanged.bind(this)}},_boundUploadFailedHandler:{type:Function,value:function(){return this._onUploadFailed.bind(this)}},_boundUploadCompletedHandler:{type:Function,value:function(){return this._onUploadCompleted.bind(this)}},_boundFileUploadCompleteHandler:{type:Function,value:function(){return this._onFileUploadCompleted.bind(this)}},listboxItemRenderFn:{type:Function,value:function(){return null}},value:{type:String,notify:!0},titleText:{type:String,value:null},caseSensitiveSorting:{type:Object,value:!0},doubleClickDownload:{type:Object,value:!0},hideToolbarOnReadonly:{type:Boolean,value:!1,reflectToAttribute:!0},hideToolbar:{type:Object,value:!1,reflectToAttribute:!0},hideBtnDelete:{type:Object,value:!1,reflectToAttribute:!0},hideBtnAdd:{type:Object,value:!1,reflectToAttribute:!0},hideBtnUpload:{type:Object,value:!1,reflectToAttribute:!0},hideBtnUpdate:{type:Object,value:!1,reflectToAttribute:!0},hideBtnDownload:{type:Object,value:!1,reflectToAttribute:!0},reorderable:{type:Boolean,value:!1},resizable:{type:Boolean,value:!1},editable:{type:Object,value:!0},uploadable:{type:Boolean,value:!1},downloadable:{type:Boolean,value:!1},deletable:{type:Object,value:!0},updatable:{type:Object,value:!0},readonly:{type:Object,value:!1,reflectToAttribute:!0},viewType:{type:String,value:function(){return"list"}},hideViewControl:{type:Object,value:function(){return!0}},_files:{type:Array,value:function(){return[]}},_deleteFiles:{type:Array,value:function(){return[]}},fileDataTransferAllowed:{type:Boolean,reflectToAttribute:!0,value:!0},sortDataField:{type:String},sortDirection:{type:String,value:"asc"},btnAlignment:{type:String,value:"left"},hideStateColumn:{type:Object,value:function(){return!1}},hideSelectionColumn:{type:Object,value:function(){return!1}},useCustomField:{type:Object,value:function(){return!1}},validateFileDeleteFn:{type:Function,value:function(){return null}},validateFileDownloadFn:{type:Function,value:function(){return null}},autoGenerateGroupId:{type:Object,value:!0},thumbnailWidth:{type:Number},thumbnailHeight:{type:Number}},observers:["_maxTotalFileCountChanged(maxTotalFileCount)","_maxTotalFileSizeChanged(maxTotalFileSize)","_maxFileSizeChanged(maxFileSize)","_minFileSizeChanged(minFileSize)","_extensionChanged(extension, allowAllExtension)","_restrictFileNameChanged(restrictFileName)","_uploadTypeChanged(uploadtype)","_preventDuplicateChanged(preventDuplicate)","_headersChanged(headers)","_uploaderUrlChanged(uploaderUrl)","_customFilterChanged(customFilter)","_valueChanged(value)","_hideToolbarChanged(hideToolbar)","_hideBtnDeleteChanged(hideBtnDelete)","_hideBtnAddChanged(hideBtnAdd)","_hideBtnUploadChanged(hideBtnUpload)","_hideBtnUpdateChanged(hideBtnUpdate)","_hideBtnDownloadChanged(hideBtnDownload)","_editableChanged(editable)","_uploadableChanged(uploadable)","_downloadableChanged(downloadable)","_deletableChanged(deletable)","_updatableChanged(updatable)","_readonlyChanged(readonly)","_onChangeViewType(viewType)","_onHideSelectionColumnChanged(hideSelectionColumn)"],get __bundleName(){return"component.sc-upload"},get __i18nBundleName(){return this.__i18nBundleName__||(this.__bundleName?this.__i18nBundleName__=this.__bundleName:this.__i18nBundleName__=this.tagName.toLowerCase()),this.__i18nBundleName__},get __i18nMessageBundleName(){return this.__i18nMessageBundleName__||(this.__i18nMessageBundleName__=this.__i18nBundleName+".message"),this.__i18nMessageBundleName__},get isDirty(){return this._hasUploadFiles()||this._hasDeleteFiles()},get totalFileCount(){return this._files.length},get allFiles(){return this._files},get remoteFiles(){return this._uploader.getRemoteFiles()},get localFiles(){return this._uploader.getLocalFiles()},get localFileSize(){return this._computedFileSize(this.localFiles)},get remoteFileSize(){return this._computedFileSize(this.remoteFiles)},get allFileSize(){return this._computedFileSize(this.allFiles)},get uploadUtil(){return this._uploadUtil||(this._uploadUtil=SCUploadUtil),this._uploadUtil},get _uploader(){return this._smartsuiteUpload||(this._smartsuiteUpload=new SMART_UPLOADER({browseButton:this.$.fileInput,url:this.uploaderUrl,uploadType:this.uploadType,filters:{maxAllFileCount:this.maxTotalFileCount,minFileSize:this.uploadUtil.displaySizeToByte(this.minFileSize),maxFileSize:this.uploadUtil.displaySizeToByte(this.maxFileSize),maxAllFileSize:this.uploadUtil.displaySizeToByte(this.maxTotalFileSize),preventDuplicate:this.preventDuplicate,extensions:this.extension,restrictFileName:this.restrictFileName},mimeTypes:function(){if(!Polymer.$Util.isEmpty(this.extension))return[{title:"Custom files",extensions:this.extension}]}.bind(this)(),headers:this._getHeaders()})),this._smartsuiteUpload},get _contentToolbar(){return this.querySelector(".content > .toolbar")},get _progressPopup(){return f.popup},clearAll:function(e){this._viewer._onAllSelectionChange({detail:!0}),this._removeSelectFiles(e),this._viewer._onAllSelectionChange({detail:!1})},download:function(e){this.readonly||this.fire("download-file",e,Polymer.Static.EventOptions.BUBBLES_FALSE_CANCELABLE_TRUE).defaultPrevented||this.defaultDownloadFn.apply(this,arguments)},defaultDownloadFn:function(e){this.readonly||(this.useFetchDownload?m.downloadUsingFetch(this.downloadFileUrl,[e],this.storageId,this.parameters,this):m.download(this.downloadFileUrl,[e],this.storageId,this.parameters,this))},defaultDownloadZipFn:function(e){1==e.length?this.download(e[0]):this.readonly||(this.useFetchDownload?m.downloadUsingFetch(this.downloadZipFileUrl,e,this.storageId,this.parameters,this):m.download(this.downloadZipFileUrl,e,this.storageId,this.parameters,this))},downloadZip:function(e){this.readonly||this.fire("download-zip-file",e,Polymer.Static.EventOptions.BUBBLES_FALSE_CANCELABLE_TRUE).defaultPrevented||this.defaultDownloadZipFn.apply(this,arguments)},_getHeaders:function(){return this.mixin(function(){var e={};return a&&(e[a.csrfHeader]=a.csrf),e}.bind(this)(),this.headers)},_headersChanged:function(){return!!this._smartsuiteUpload&&void(this._uploader.config.headers=this._getHeaders())},_customFilterChanged:function(e){var t=this.computedHost,e=t[e].bind(t);this._uploader.uploadFilter.contains("customFilter")?Polymer.$Util.isFunction(e)?this._uploader.modifyFilter("customFilter",{validateFn:e}):this._uploader.removeFilter("customFilter"):Polymer.$Util.isFunction(e)&&this._uploader.addFilter({customFilter:{errorCode:999,filetype:"local",enable:!0,validateFn:e}})},_uploaderUrlChanged:function(e){return!!this._smartsuiteUpload&&void(this._uploader.config.url=e)},_uploadTypeChanged:function(e){return!!this._smartsuiteUpload&&void(this._uploader.config.uploadType=e)},_hideToolbarChanged:function(e){this._viewer&&this._viewer.listboxElement&&this._viewer.listboxElement.isAttached&&this._contentToolbar.hidden!=e&&((this._contentToolbar.hidden=e)?(this._contentToolbar.hidingHeight=this._uploadToolbarElHeight,this._uploadToolbarElHeight=0):(this._uploadToolbarElHeight=this._contentToolbar.hidingHeight,this._contentToolbar.hidingHeight=null),this._doContentElementResize())},_showUploadProgress:function(){_?this._progressPopup.getContent().addAdditionalFileInfo(this._uploader.getLocalFiles()):(this._progressPopup.show(),this._progressPopup.getContent().setParam(this._uploader.getLocalFiles()))},_computedFileSize:function(e){for(var t=0,i=0,l=(e=e).length;i<l;i++)t+=e[i].size;return t},_onHideSelectionColumnChanged:function(e){this._files=this._files.slice()},_maxTotalFileCountChanged:function(e){this._filterPropertyChange("maxAllFileCount",e)},_maxTotalFileSizeChanged:function(e){this._filterPropertyChange("maxAllFileSize",this.uploadUtil.displaySizeToByte(e))},_maxFileSizeChanged:function(e){this._filterPropertyChange("maxFileSize",this.uploadUtil.displaySizeToByte(e))},_minFileSizeChanged:function(e){this._filterPropertyChange("minFileSize",this.uploadUtil.displaySizeToByte(e))},_extensionChanged:function(e){var e=this.extension;this._filterPropertyChange("extensions",e)&&(null==e?this._uploader.resetMimeTypes():(e=[{title:"Custom files",extensions:e}],this.allowAllExtension&&e.push({title:"All Files",extensions:"*.*"}),this._uploader.setMimeTypes(e)))},_restrictFileNameChanged:function(e){this._filterPropertyChange("restrictFileName",e)},_preventDuplicateChanged:function(e){this._filterPropertyChange("preventDuplicate",e)},_filterPropertyChange:function(e,t){var i;return!!this._smartsuiteUpload&&((i={})[e]=t,this._uploader.uploadFilter.init(i),!0)},_onFileAdded:function(e){for(var t,i=["_files"],l=0,n=e.length;l<n;l++)3!=(t=e[l]).state&&i.push(t);1<i.length&&(this.push.apply(this,i),this.fire("file-added",e,{bubbles:!1})),this._uploader.getLocalFiles().length&&this.autoUpload&&this.upload()},_onFilterError:function(e){var t=999===e.filter.errorCode?e.message:this.__i18nMessageBundleName+"."+e.filter.errorCode;SCAlert.show(this.alertTitleText,this.translate(t,null,e.args),null,null,!0),this.fire("filter-error",e,{bubbles:!1})},_onFileStateChanged:function(e,t){},_onFileDeleted:function(e){var t,i=this._files,l=[],n=0;for(e.length;n<e.length;n++)3==(t=e[n]).state&&this._deleteFiles.push(t),l.push(t),i.splice(i.indexOf(t),1);this.notifySplices("_files",[{index:0,removed:l,addedCount:0,obect:i,type:"splice"}]),0<e.length&&this.fire("file-deleted",e,{bubbles:!1})},_onUploadFailed:function(){this._uploading=!1,this._progressPopup.close(),this.fire("upload-failed",null,{bubbles:!1}),_=!1,this.__promiseReject(this),SCAlert.show(this.alertTitleText,this.uploadFailedText,null,null,!0)},_onUploadCompleted:function(e){this._uploading=!1,Polymer.$Util.isNotEmpty(e.xhr.responseText)?(e=JSON.parse(e.xhr.responseText))&&e.type&&"500"==e.type&&this._errorMessageResolver(e,"upload"):setTimeout(function(){this.fire("upload-complete",this._files,{bubbles:!1}),this._uploadProcessCompleted()}.bind(this),100),setTimeout(function(){_=!1,this._progressPopup.close(),_=!1}.bind(this),100)},_onFileUploadProgressChanged:function(e,t){this._progressPopup.getContent().progressChanged(t.id,t.percent)},_onUploadProgressChanged:function(e,t){this._progressPopup.getContent().totalProgressChanged(t.percent)},_onFileUploadCompleted:function(e,t){this._progressPopup.getContent().updateUploadingInfo(e,t)},_onDragOver:function(e){e.preventDefault()},_onDragEnter:function(e){e.preventDefault()},_onDrop:function(e){var t=this._uploader;e.preventDefault(),!this.readonly&&this.editable&&t.addLocalFiles(e.dataTransfer.files)},_generatePromise:function(){return new Promise(function(e,t){this.__promiseResolve=e,this.__promiseReject=t}.bind(this))},_uploadProcessCompleted:function(){this._isProcessing()||(this.fire("upload-completed",this._files,{bubbles:!1}),this.load(),this.__promiseResolve(this,this._files))},_isDeleting:function(){return this._deleteAjaxElement.loading},_isUploading:function(){return this._uploading},_isProcessing:function(){return this._isDeleting()||this._isUploading()},formulas:{disableDeleteButton:function(){return!!Polymer.$Util.isEmpty(this._disableDeleteButton)||this._disableDeleteButton},disableUpdateButton:function(){return!!Polymer.$Util.isEmpty(this._disableUpdateButton)||this._disableUpdateButton},disableDownloadButton:function(){return!!Polymer.$Util.isEmpty(this._disableDownloadButton)||this._disableDownloadButton},addButton:function(){return!(!this.hideBtnAdd&&!this.readonly&&this.editable)},uploadButton:function(){return!(!this.hideBtnUpload&&!this.readonly&&this.editable&&this.uploadable)},downloadButton:function(){return!(!this.hideBtnDownload&&!this.readonly)||!!this.editable&&!this.downloadable},deleteButton:function(){return!(!this.hideBtnDelete&&!this.readonly&&this.editable&&this.deletable)},updateButton:function(){return!(!this.hideBtnUpdate&&!this.readonly&&this.editable&&this.useCustomField&&this.updatable)}},get _isContentElementFit(){return!0},get _uploadToolbarElement(){return this._toolbarEl||(this._toolbarEl=this.querySelector(".toolbar")),this._toolbarEl},get _uploadInfoElement(){return this._infoEl||(this._infoEl=this.querySelector(".info")),this._infoEl},get _viewer(){return this.$[this.viewType+"View"]},get _uploadToolbarElementHeight(){return this._uploadToolbarElHeight||(this._uploadToolbarElHeight=this._uploadToolbarElement.offsetHeight),this._uploadToolbarElHeight},get _uploadInfoElementHeight(){return this._uploadInfoElHeight||(this._uploadInfoElHeight=this._uploadInfoElement.offsetHeight),this._uploadInfoElHeight},_doContentElementResize:function(){var e,t;!this._isDestroyed&&this.isVisible(!0)&&(this._fited=this._isContentElementFit,this._contentElement.hidden=!0,e=(t=this._computedContentElementSize()).width,t=t.height,this._contentElement.style.cssText="width: "+e+"px; height: "+t+"px;",this._contentElement.hidden=!1,this._viewer.style.height=t-this._uploadToolbarElementHeight-this._uploadInfoElementHeight+"px",this._viewer.doContentElementResize)&&this._viewer.doContentElementResize()},_hasDeleteFiles:function(){return this._deleteFiles&&!!this._deleteFiles.length},_hasUploadFiles:function(){return this.isAttached&&!!this._uploader.getLocalFiles().length},_generateGroupIdCallback:function(e){this._generateGroupId(e)},_generateGroupId:function(e){return this.generateId&&Polymer.$Util.isFunction(this.generateId)?void e.call(this.generateId.call(this)):this.useServerGroupId?void this._getGroupIdFromServer.call(this,e):void e.call(this,Polymer.$Util.UUID())},_getGroupIdFromServer:function(i){var e=p.querySelector("meta[name=_csrf]").content,t=p.querySelector("meta[name=_csrf_header]").content,l=new XMLHttpRequest;l.open("POST","/attachment/management/getAthgUuid.do",!1),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Accept","text/plain"),l.setRequestHeader(t,e),l.addEventListener("loadend",function(e){var t;200===l.status?(l.responseType||l._responseType,t=!l.responseType,l._jsonPrefix&&l._jsonPrefix.length,i(t||void 0===l.response?l.responseText:e.response)):SCAjax.prototype.ajaxExceptionHandler(new function(e,t,i){this.name="ajaxException",this.message=e,this.code=t,this.xhr=i}("",l.status,l))}),l.addEventListener("error",function(e){}),l.send(null)},update:function(){var e=this._viewer.selectedFiles,t=this.querySelector("sc-listbox"),i=t.querySelector("div.fileitem").querySelectorAll("div[data-field]"),l=this._getAvailableCustomDataField(i);if(l.length)for(var n=0,o=e.length;n<o;n++){var s={},a=e[n].id,r=t.querySelector('div[file-id="'+a+'"]');s.id=a;for(var d=0,h=l.length;d<h;d++){var u=r.querySelector('div[data-field="'+l[d]+'"]');s[l[d]]=u.firstChild.value}this._updateAjaxElement.body=s,this._updateAjaxElement.request()}},upload:function(e){var t,i,l,n,o,s,a;return this._currentUploadPromise||(e=null!=e?e:this._generatePromise(),(t=this.querySelector("sc-listbox"))&&!t._itemsRendered?(i=function(e){t.removeEventListener("render",i),delete this._currentUploadPromise,this.upload.call(this,e),t=i=null}.bind(this),t.addEventListener("render",i),this._currentUploadPromise=e,this._currentUploadPromise):(n=this._hasDeleteFiles(),l=this._hasUploadFiles(),this.readonly?this.__promiseReject(this):n||l?(n&&(n={ids:this._deleteFiles.map(function(e){return e.id}),storageId:this.storageId},this._deleteAjaxElement.body=Object.assign(n,this.parameters),this._deleteAjaxElement.request()),l&&(this._uploading=!0,o={},s=Object.assign({},this.parameters,{storageId:this.storageId}),this.useCustomField?(a=this.getCustomFieldData(),this.async(function(){this.autoGenerateGroupId&&Polymer.$Util.isEmpty(this.value)?this._generateGroupIdCallback(function(e){this.value=e,Polymer.$Util.isNil(this.value)||(o.groupId=this.value),this._uploader.upload(this.mixin(o,s),a)}.bind(this)):(Polymer.$Util.isNil(this.value)||(o.groupId=this.value),this._uploader.upload(this.mixin(o,s),a))}.bind(this),100)):this.async(function(){this.autoGenerateGroupId&&Polymer.$Util.isEmpty(this.value)?this._generateGroupIdCallback(function(e){this.value=e,Polymer.$Util.isNil(this.value)||(o.groupId=this.value),this._uploader.upload(this.mixin(o,s))}.bind(this)):(Polymer.$Util.isNil(this.value)||(o.groupId=this.value),this._uploader.upload(this.mixin(o,s)))}.bind(this),100),this._showUploadProgress(),_=!0)):this._uploadProcessCompleted(),e))},getCustomFieldData:function(){var e=this.querySelector("sc-listbox"),t=e.querySelector("div.fileitem");if(dataFieldList=t.querySelectorAll("div[data-field]"),customFieldList=this._getAvailableCustomDataField(dataFieldList),resultList=[],customFieldList.length)for(var i=this._uploader.getLocalFiles(),l=0,n=i.length;l<n;l++){var o={},s=i[l].id,a=e.querySelector('div[file-id="'+s+'"]');o.id=s;for(var r=0,d=customFieldList.length;r<d;r++){var h=a.querySelector('div[data-field="'+customFieldList[r]+'"]');h.firstChild&&h.firstChild.value&&(o[customFieldList[r]]=h.firstChild.value,i[l].useCustomField=!0)}resultList.push(o)}return resultList},_getAvailableCustomDataField:function(e){for(var t=[],i=0,l=e.length;i<l;i++){var n=e[i];0===n.classList.length&&t.push(n.getAttribute("data-field"))}return t},load:function(){var e={groupId:this.value||""};return this.storageId&&(e.storageId=this.storageId),this._loadAjaxElement.body=this.mixin(e,this.parameters),this._loadAjaxElement.request()},_uploadableChanged:function(e){this.applyFormula("uploadButton")},_downloadableChanged:function(e){this.applyFormula("downloadButton")},_editableChanged:function(e){this.applyFormula("uploadButton","addButton","downloadButton","deleteButton")},_deletableChanged:function(){this.applyFormula("deleteButton")},_updatableChanged:function(){this.applyFormula("updateButton")},_readonlyChanged:function(){this.applyFormula("uploadButton","addButton","downloadButton","deleteButton"),this.hideToolbarOnReadonly&&(this._uploadToolbarElHeight=null,this._doContentElementResize())},_hideBtnDeleteChanged:function(){this.applyFormula("deleteButton")},_hideBtnAddChanged:function(){this.applyFormula("addButton")},_hideBtnUploadChanged:function(){this.applyFormula("uploadButton")},_hideBtnUpdateChanged:function(){this.applyFormula("updateButton")},_hideBtnDownloadChanged:function(){this.applyFormula("downloadButton")},_valueChanged:function(e){this._isProcessing()||(Polymer.$Util.isEmpty(e)?this.reset():this.load())},_onAdd:function(e){!this.readonly&&this.editable&&this.$.fileInput.click()},_onDelete:function(){this.readonly||!this.deletable||this.validateFileDeleteFn&&"function"==typeof this.domHost[this.validateFileDeleteFn]&&!this.domHost[this.validateFileDeleteFn].call(this.domHost,this._viewer.selectedFiles)||SCAlert.confirm(this.confirmTitleText,this.deleteConfirmText,function(e){if("yes"===e)if(this.autoDelete){this._generatePromise();for(var t=[],i=[],l=this._viewer.selectedFiles,n=0;n<l.length;n++)(l[n].mimeType?t:i).push(l[n].id);0<t.length?(this.preventUploadCompleteProcess=!0,this._deleteAjaxElement.body=t,this._deleteAjaxElement.request()):0<i.length&&this._removeSelectFiles()}else this._removeSelectFiles()}.bind(this),null,!0)},_removeSelectFiles:function(e){for(var t,i=this._viewer.selectedFiles,l=[],n=(this._uploader,0),o=i.length;n<o;n++)t=i[n],e&&!e(t)||l.push(t.id);l.length&&this._uploader.deleteFiles(l),this.autoDelete&&(this._deleteFiles.length=0)},_onUpload:function(){return this.upload()},_onUpdate:function(){return this.update()},_onDownload:function(e){var t=e.detail;if(!this.readonly&&this.doubleClickDownload){if(this.validateFileDownloadFn&&"function"==typeof this.domHost[this.validateFileDownloadFn])if("download"==e.type&&3==this._uploader.getFile(t).state){if(!this.domHost[this.validateFileDownloadFn].call(this.domHost,[this._uploader.getFile(t)]))return}else if(!this.domHost[this.validateFileDownloadFn].call(this.domHost,this._viewer.selectedFiles))return;if("download"==e.type&&3==this._uploader.getFile(t).state)this.download(e.detail);else{for(var i,l=this._viewer.selectedFiles,n=[],o=0,s=l.length;o<s;o++)i=l[o],3==this._uploader.getFile(i.id).state&&n.push(i.id);n.length&&this.downloadZip(n)}}},_onChangeView:function(e){this.viewType=e.currentTarget.getAttribute("target-view-id")},_onChangeViewType:function(e,t){var i;this.isAttached?"SC-UPLOAD-FIELD"!==this.tagName&&(i=[],t&&t!==e&&(i=this.$[t+"View"].selectedFiles,this.$[t+"View"].isAvailable)&&this.$[t+"View"].setAvailable(!1),e)&&(this.querySelector("div.selected").classList.toggle("selected"),this.$[e+"ViewButton"].classList.toggle("selected"),this.$.viewPages.selectItem(this.$[e+"View"]),this.$[e+"View"].setSelectItem(i),this.$[e+"View"].setAvailable(!0)):this.debounce("_uploadViewTypeDebouncer",this._onChangeViewType.bind(this,e,t),16)},_onSelect:function(e){this._disableDeleteButton=e.detail&&!e.detail.selectedCount,this._disableUpdateButton=e.detail&&!e.detail.selectedCount,this._disableDownloadButton=e.detail&&!e.detail.selectedRemoteCount,this.applyFormula("disableDeleteButton","disableDownloadButton","disableUpdateButton")},_onDeselect:function(e){this._disableDeleteButton=e.detail&&!e.detail.selectedCount,this._disableUpdateButton=e.detail&&!e.detail.selectedCount,this._disableDownloadButton=e.detail&&!e.detail.selectedRemoteCount,this.applyFormula("disableDeleteButton","disableDownloadButton","disableUpdateButton")},_onItemSelect:function(e){this.fire("item-select",{index:e.detail,item:this._files[e.detail]},{bubbles:!1})},_onAttachmentLoad:function(e,t){var i,t=t.response;t&&t.type&&"500"==t.type?this._errorMessageResolver(t,"load"):((i=this._uploader).trigger("Clear"),i.addRemoteFiles(t),this._deleteFiles.length=0,this._files=i.getRemoteFiles(),this.fire("load-complete",this._files,{bubbles:!1}))},_onAttachmentDelete:function(e,t){t=t.response;t&&t.type&&"500"==t.type?this._errorMessageResolver(t,"delete"):(this.fire("delete-complete",null,{bubbles:!1}),this.preventUploadCompleteProcess?(this._removeSelectFiles(),this.preventUploadCompleteProcess=!1):this._uploadProcessCompleted())},_onAttachmentLoadError:function(e){this.attachmentError(e,"load")},_onAttachmentDeleteError:function(e){this.attachmentError(e,"delete")},_onAttachmentUpdateError:function(e){this.attachmentError(e,"update")},attachmentError:function(e,t){e.detail&&e.detail.error&&e.detail.error.xhr&&(e=e.detail.error.xhr.response)&&this._errorMessageResolver(e,t)},_errorMessageResolver:function(e,t){var i="";"load"==t?i="조회":"delete"==t?i="삭제":"update"==t?i="업데이트":"upload"==t&&(i="업로드"),console.error(e),SCAlert.show(i+" 오류","["+e.detail+"] "+i+" 오류가 발생했습니다.")},_computedUploadConfigSizeInfo:function(e){var t=this.uploadUtil,e=t.displaySizeToByte(e);return isNaN(e)||e<=0?"":t.byteToDisplaySize(e,this._boundByteToFormattedDisplaySize)},_computedTotalText:function(e){e=this.uploadUtil.displaySizeToByte(e);return isNaN(e)||e<=0?"":this.totalText},_computedUploadConfigLimitInfo:function(e){return this.uploadUtil.displaySizeToByte(this.maxTotalFileSize)<=0?this.unlimitedText:" "+this.limitedText},_computedUploadCurrentSizeInfo:function(e){return this.uploadUtil.byteToDisplaySize(this.allFileSize,this._boundByteToFormattedDisplaySize)},_computedFileBrowse:function(e,t){return!(t<=0)&&this._files.length>=t},_computedToolbarBtnLocation:function(e){return this.querySelector(".content-wrap .content sc-toolbar").setAttribute("btn-alignment",e),"left"===e},_computedUpload:function(e){return!(this._hasUploadFiles()||this._hasDeleteFiles())},_computedHeader:function(e,t){return Polymer.$Util.isEmpty(e)&&!1===t},_computedHideToolbarOnReadonly:function(e){return this.hideToolbarOnReadonly&&e},get _loadAjaxElement(){return this._loadAjaxEl||(this._loadAjaxEl=this.querySelector("sc-ajax[load]")),this._loadAjaxEl},get _deleteAjaxElement(){return this._deleteAjaxEl||(this._deleteAjaxEl=this.querySelector("sc-ajax[delete]")),this._deleteAjaxEl},get _updateAjaxElement(){return this._updateAjaxEl||(this._updateAjaxEl=this.querySelector("sc-ajax[update]")),this._updateAjaxEl},_prepare:function(){var e,t=this._uploader,i=(t.bind("FileAdded",this._boundFileAddedHandler),t.bind("FilterError",this._boundFilterErrorHandler),t.bind("FileStateChanged",this._boundFileStateChangedHandler),t.bind("FileDeleted",this._boundFileDeletedHandler),t.bind("UploadCompleted",this._boundUploadCompletedHandler),t.bind("FileUploadProgressChanged",this._boundFileUploadProgressChangedHandler),t.bind("UploadProgressChanged",this._boundUploadProgressChangedHandler),t.bind("UploadFailed",this._boundUploadFailedHandler),t.bind("FileStateChanged",this._boundFileUploadCompleteHandler),this.ondragover=this._boundDragOverHandler,this.ondragenter=this._boundDragEnterHandler,this.ondrop=this._boundOnDropHandler,c[this.storageId]);for(e in i){var l=this["_"+e+"Changed"];l&&l.call(this,i[e])}},reset:function(){var e=this._uploader;e.trigger("Clear"),this._files=e.getFiles(),Polymer.$Util.isEmpty(this._deleteFiles)||(this._deleteFiles.length=0),Polymer.$Util.isEmpty(this.value)||(this.value=void 0)},attached:function(){this._isPrepared||(this._isPrepared=!0,this._prepare())},_destroy:function(){this._files.length=0,this._loadAjaxEl=null,this._deleteAjaxEl=null,this._updateAjaxEl=null,this._uploadUtil=null,this.ondragover=null,this.ondragenter=null,this.ondrop=null,this.viewType="list",this._boundFileAddedHandler=null,this._boundFilterErrorHandler=null,this._boundFileStateChangedHandler=null,this._boundFileDeletedHandler=null,this._boundDragOverHandler=null,this._boundDragEnterHandler=null,this._boundOnDropHandler=null,this._boundUploadProgressChangedHandler=null,this._boundFileUploadProgressChangedHandler=null,this._boundUploadFailedHandler=null,this._boundUploadCompletedHandler=null,this._boundFileUploadCompleteHandler=null,this._uploadToolbarElHeight=null,this._uploadInfoElHeight=null,this._uploader.destroy()}},function(){if(!0===Polymer.Settings.useStyleCacheBehavior)return{_clearStyleCache:function(){Polymer.SCPanelBehaviorImpl._clearStyleCache.call(this),this._uploadInfoElHeight=null,this._uploadToolbarElHeight=null}}},function(){if(!0===Polymer.Settings.useGlobalStyleCache)return{get _uploadToolbarElementHeight(){if(!this._uploadToolbarElHeight){if(this._contentToolbar.hidden&&0==this._uploadToolbarElHeight)return 0;this._uploadToolbarElHeight=SCStyleManager.getStyleCache(this.is+"_uploadToolbarElementHeight",function(){return this._uploadToolbarElement.offsetHeight}.bind(this),this.hasAttribute("style-cache-disabled"))}return this._uploadToolbarElHeight},get _uploadInfoElementHeight(){return this._uploadInfoElHeight||(this._uploadInfoElHeight=SCStyleManager.getStyleCache(this.is+"_uploadInfoElementHeight",function(){return this._uploadInfoElement.offsetHeight}.bind(this),this.hasAttribute("style-cache-disabled"))),this._uploadInfoElHeight}}})}(),Polymer.SCUploadBehavior=[Polymer.SCUploadBehaviorImpl],SCUpload=Polymer({is:"sc-upload",className:"SCUpload",behaviors:[Polymer.SCPanelBehavior,Polymer.SCUploadBehavior]}),Polymer({is:"sc-upload-field",properties:{required:{type:Object,value:function(){return!1}},editable:{type:Object,value:function(){return!0}},value:{type:String,notify:!0,observer:"_valueChanged"},_currentFile:{type:Object,value:function(){return{remote:!1}}},_boundFileAddedHandler:{type:Function,value:function(){return this._onFileAdded.bind(this)}},_boundUploadCompletedHandler:{type:Function,value:function(){return this._onUploadCompleted.bind(this)}}},observers:["_onRemoteStateChanged(_currentFile.remote)"],get _loadAjaxElement(){return this._loadAjaxEl||(this._loadAjaxEl=this.querySelector("sc-ajax[load]")),this._loadAjaxEl},get _deleteAjaxElement(){return this._deleteAjaxEl||(this._deleteAjaxEl=this.querySelector("sc-ajax[delete]")),this._deleteAjaxEl},attached:function(){this._isPrepared||(this._isPrepared=!0,this._prepare())},_prepare:function(){var e=this._uploader;e.bind("FileAdded",this._boundFileAddedHandler),e.bind("FilterError",this._boundFilterErrorHandler),e.bind("UploadCompleted",this._boundUploadCompletedHandler),e.bind("UploadFailed",this._boundUploadFailedHandler)},load:function(){return this._loadAjaxElement.body={groupId:this.value||""},this._loadAjaxElement.request()},upload:function(){var e=this._generatePromise();return Polymer.$Util.isEmpty(this.value)&&(this.value=this.groupId=Polymer.SCAutoGenIdBehavior.generateId(!0)),this.load().then(function(e){e=e.response;e&&0<e.length?this.deleteFile(e).then(function(){this._uploadFileEmptyCheck()||this._uploader.upload({groupId:this.value})}.bind(this)):this._uploadFileEmptyCheck()||this._uploader.upload({groupId:this.value})}.bind(this)),e},deleteFile:function(e){e=e.map(function(e){return e.id});return this._deleteAjaxElement.body=e,this._deleteAjaxElement.request()},_onAdd:function(e){this.reset(),this.editable&&this.$.fileInput.click()},_onFileAdded:function(e){this._currentFile=e[0];for(var t=this._uploader.getLocalFiles(),i=[],l=0,n=t.length;l<n;l++){var o=t[l];o!==this._currentFile&&i.push(o.id)}0<i.length&&this._uploader.deleteFile(i)},_onUploadCompleted:function(e){this.set("_currentFile.remote","true"),this.__promiseResolve(this,e)},_uploadFileEmptyCheck:function(){return 0===this._uploader.getLocalFiles().length&&(this.__promiseResolve(this,null),!0)},_onFileDownload:function(){this._currentFile&&this._currentFile.remote&&this.load().then(function(e){e=e.response;this.download(e[0].id)}.bind(this))},_valueChanged:function(e){return UT.isEmpty(e)?void this.reset():void(e!==this.groupId&&this.load().then(function(e){e=e.response;e&&e[0]&&(this._currentFile=e[0],this.set("_currentFile.remote","true"))}.bind(this)))},reset:function(){this._uploader.trigger("Clear"),Polymer.$Util.isEmpty(this.value)||(this.value=void 0),this._currentFile=null},_generatePromise:function(){return new Promise(function(e,t){this.__promiseResolve=e,this.__promiseReject=t}.bind(this))},_onRemoteStateChanged:function(e){e?this.setAttribute("remote",""):this.removeAttribute("remote")},_destroy:function(){this._currentFile=null,this._uploadUtil=null,this._boundFileAddedHandler=null,this._boundUploadCompletedHandler=null,this._uploader.destroy()},behaviors:[Polymer.SCI18nBehavior,Polymer.SCUploadBehavior]});