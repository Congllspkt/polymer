var smtuploadI18n={locale:"ko_kr",message:{901:{ko_kr:"최대 {0}개 까지만 업로드 가능합니다.\n(총 파일 개수 : {1})",en_us:""},902:{ko_kr:"최소 {0} 이상만 업로드 가능합니다.\n(파일명 : {1}, 크기 : {2})",en_us:""},903:{ko_kr:"최대 {0} 이하만 업로드 가능합니다.\n(파일명 : {1}, 크기 : {2})",en_us:""},904:{ko_kr:"총 파일 크기가 {0} 이하만 업로드 가능합니다.\n(총 파일 크기 : {1})",en_us:""},905:{ko_kr:"중복된 파일은 업로드 불가합니다.\n(중복 파일명 : {0})",en_us:""},906:{ko_kr:"허용되지 않은 확장자입니다.\n(파일명 : {0})",en_us:"Not Allowed Extensions."},907:{ko_kr:"허용되지 않은 문자가 파일명에 포함되어 있습니다.\n(파일명 : {0}, 허용되지 않은 문자 : {1})",en_us:"Not Allowed Filenames."},908:{ko_kr:"이미지 파일 업로드는 {0} 이하만 가능합니다.\n(파일명 : {1}, Width : {2}px, Height : {3}px)",en_us:"Not Allowed Image Size."}},translate:function(e,t,i){var r=this,n=r.locale,o=r.message[e];return i&&(n=i),o?r.applyValue(o[n.toLocaleLowerCase()],t):"[object String]"==Object.prototype.toString.call(t)?t:e},applyValue:function(e,t){for(var i=0;i<t.length;i++){var r=t[i];e=e.replace("{"+i+"}",r)}return e},addMessage:function(e){for(var t in e)this.message[t]=e[t]},modifyMessage:function(e,t){var i,r=this.message;for(i in t)r[e][i]=t[i]},setLocale:function(e){this.locale=e}},smtutil={copy:function(e,t){var i={};function r(e){for(var t=0;t<this.length;t++)if(typeof e===this[t])return!0;return!1}if(t&&t.exclude){t.exclude.contains=r;var n,o=e,s=t.exclude;for(n in o)s.contains(o[n])||(i[n]=o[n])}else if(t&&t.include){t.include.contains=r;var a,l=e,d=t.include;for(a in l)d.contains(l[a])&&(i[a]=l[a])}else for(var u in e)i[u]=e[u];return i},combineArray:function(){for(var t=[],e=0;e<arguments.length;e++)smtutil.each(arguments[e],function(e){t.push(e)});return t},contains:function(e,t){var i;if(void 0!==t)for(i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},defer:function(e,t){setTimeout(e,t)},extend:function(e,t){for(var i in t)e[i]=t[i]},override:function(e,t){},each:function(e,t,i){if(this.isArray(e)){for(var r,n=0,o=e.length;n<o;n++)if(r=e[n],!1===t.call(i||r,r,n,e))return n;return!0}return!1},isArray:function(e){var t=this.typeOf(e);return"array"===t||"filelist"===t||e instanceof Array},isEmpty:function(e){return null==e||""===e||void 0===e},loadScript:function(e,t){var i=this,r=document.getElementsByTagName("body")[0],n=document.createElement("script"),o=!(n.type="text/javascript");n.onreadystatechange=function(){"loaded"!=this.readyState&&"complete"!=this.readyState||o||(o=!0,t.call(i))},n.onload=function(){t.call(i)},n.src=e,r.appendChild(n)},mimeTypes:function(){},typeOf:function(e){return void 0===e?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},isIE:function(){var e=navigator.userAgent.toLowerCase();return"Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=e.indexOf("msie")},XMLHttpRequest:function(){var e=new XMLHttpRequest;this.init.call(this,e)}};switch(smtutil.XMLHttpRequest.prototype={headers:{},listeners:{},init:function(e){this.id=smtutil.uuid()+"-request",this.orgXhr=e},createFormData:function(e){var t,i=new FormData;for(t in e)if("files"===t)for(var r=e[t],n=0;n<r.length;n++)i.append("ids",r[n].uuid),i.append("files",r[n]);else i.append(t,e[t]);return i},request:function(e){var t=this,i=t.orgXhr,r=e.method,n=e.url,e=e.body;t.registerListeners(i,t.listeners),i.requestBody=i.upload.requestBody={id:e.id,groupId:e.groupId,xhr:i},i.open(r,n,!0),t.registerCustomHeaders(i),i.send(t.createFormData(e))},registerCustomHeaders:function(e){var t,i=this.headers;for(t in i)e.setRequestHeader(t,i[t])},registerListeners:function(e,t){for(var i in t)"onprogress"===i?e.upload[i]=t[i]:e[i]=t[i]},destroy:function(){var e,t=this,i=t.listeners,r=t.orgXhr;for(e in i)r.upload.removeEventListener(e,i[e]),r.removeEventListener(e,i[e]);t.orgXhr.upload.requestBody=null,t.orgXhr.upload=null,t.orgXhr=null,t.config=null,t.headers=null,t.listeners=null}},smtutil.File=function(e,t){this.init.call(this,e,t)},smtutil.File.prototype={FILE_READY:0,FILE_UPLOADING:1,FILE_FAILED:2,FILE_SUCCEED:3,name:"",type:"",loadedSize:0,percent:0,size:0,state:0,orgFile:{},init:function(e,t){if(t)for(var i in this.id=e.id,this.name=e.name,this.type=e.mimeType,this.size=this.loadedSize=e.size,this.percent=100,this.state=this.FILE_SUCCEED,this.orgFile=e)this.hasOwnProperty(i)||(this[i]=e[i]);else this.id=smtupload.uuid(),this.name=e.name,this.type=e.type,this.size=e.size,this.orgFile=e},setProgress:function(e){var t=this;t.size<=e.loaded?t.loadedSize=t.size:t.loadedSize=e.loaded,t.percent=e.loaded/e.total*100},setState:function(e){(this.state=e)===this.FILE_FAILED&&(this.percent=this.loadedSize=0)},destroy:function(){delete this.orgFile}},smtutil.Filter=function(e){this.validator.call(this),this.init.call(this,e)},smtutil.Filter.prototype={eventTarget:{},getDefaultValidator:function(){return{maxAllFileCount:{errorCode:901,enable:!1,fileType:"all",value:0,validateFn:function(e,t){return e.length>t?[t,e.length]:null}},minFileSize:{errorCode:902,enable:!1,fileType:"local",value:0,validateFn:function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(r.size<t)return this.getMessageValue(t,r.name,r.size)}return null},getMessageValue:function(e,t,i){var r,n={TB:+Math.pow(1024,4),GB:+Math.pow(1024,3),MB:+Math.pow(1024,2),KB:+Math.pow(1024,1),Bytes:1},o="";for(r in n){var s=e/n[r];1<=s&&s<1024&&(o=r)}return[(e/n[o]).toFixed(2)+o,t,(i/n[o]).toFixed(2)+o]}},maxFileSize:{errorCode:903,enable:!1,fileType:"local",value:0,validateFn:function(e,t,i){var r=t;if(0<(r=0<i.maxAllFileSize.value?Math.min(t,i.maxAllFileSize.value):r))for(var n=0;n<e.length;n++){var o=e[n];if(o.size>r)return this.getMessageValue(r,o.name,o.size)}return null},getMessageValue:function(e,t,i){var r,n={TB:+Math.pow(1024,4),GB:+Math.pow(1024,3),MB:+Math.pow(1024,2),KB:+Math.pow(1024,1),Bytes:1},o="";for(r in n){var s=e/n[r];1<=s&&s<1024&&(o=r)}return[(e/n[o]).toFixed(2)+o,t,(i/n[o]).toFixed(2)+o]}},maxAllFileSize:{errorCode:904,enable:!1,fileType:"all",value:0,validateFn:function(e,t){var i=0;if(0<t){for(var r=0;r<e.length;r++)i+=e[r].size;if(t<i)return this.getMessageValue(t,i)}return null},getMessageValue:function(e,t){var i,r={TB:+Math.pow(1024,4),GB:+Math.pow(1024,3),MB:+Math.pow(1024,2),KB:+Math.pow(1024,1),Bytes:1},n="";for(i in r){var o=e/r[i];1<=o&&o<1024&&(n=i)}return[(e/r[n]).toFixed(2)+n,(t/r[n]).toFixed(2)+n]}},preventDuplicate:{errorCode:905,enable:!1,fileType:"all",value:!1,validateFn:function(e,t){if(t)for(var i=0;i<e.length;i++)for(var r=e[i],n=i+1;n<e.length;n++)if(r.name===e[n].name&&r.size===e[n].size)return this.getMessageValue(r.name,r.size);return null},getMessageValue:function(e,t){var i,r={TB:+Math.pow(1024,4),GB:+Math.pow(1024,3),MB:+Math.pow(1024,2),KB:+Math.pow(1024,1),Bytes:1},n="";for(i in r){var o=t/r[i];1<=o&&o<1024&&(n=i)}return[e,(t/r[n]).toFixed(2)+n]}},extensions:{errorCode:906,enable:!1,fileType:"local",type:"white",value:"",validateFn:function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=!1,o=r.name.split(".").pop().toLowerCase();if("white"===this.type){if(!(n=0<=t.toLowerCase().indexOf(o)?!0:n))return[r.name,o]}else if(0<=t.toLowerCase().indexOf(o))return[r.name,o]}return null}},restrictFileName:{errorCode:907,enable:!1,fileType:"local",type:"black",value:[],validateFn:function(e,t){var i;if(null!=t&&""!==t){try{i=t.split(",")}catch(e){console.error(e)}for(var r=0;r<e.length;r++){var n,o=e[r],s=!1,a=o.name.toLowerCase();if("white"===this.type){for(var l=0;l<i.length;l++)n=i[l].toLowerCase(),0<=a.indexOf(n)&&(s=!0);if(!s)return[o.name,i[l]]}else for(var d=0;d<i.length;d++)if(n=i[d].toLowerCase(),0<=a.indexOf(n))return[o.name,i[d]]}}return null}},imageMaxPixel:{errorCode:908,enable:!1,fileType:"local",imageFiles:[],value:{maxWidth:"800",maxHeight:"600"},validateFn:function(e,t){for(var i=this.imageFiles,r=t.maxWidth,n=t.maxHeight,o=0;o<i.length;o++){var s=i[o];if(s.width>r||s.height>n)return this.imageFiles=[],[r+" * "+n,s.name,s.width,s.height]}return this.imageFiles=[],null}}}},validator:function(){this.__validator=this.getDefaultValidator()},init:function(e){this.initConfig(e)},initConfig:function(e){for(var t in e){var i,r=this.getFilter(t);r&&(null!==e[t]&&void 0!==e[t]?(r.enable=!0,r.value=e[t]):(this.removeFilter(t),r=this.getDefaultValidator()[t],(i={})[t]=r,this.addFilter(i)))}},addFilter:function(e){for(var t in e)this.__validator[t]=e[t]},contains:function(e){e=this.getFilter(e);return!smtutil.isEmpty(e)},modifyFilter:function(e,t){var i,r=this.__validator[e];for(i in t)r[i]=t[i]},removeFilter:function(e){delete this.__validator[e]},getFilter:function(e){return this.__validator[e]},preValidate:function(e,t,i,r){var n,o=this.__validator,s=o.imageMaxPixel;s&&s.enable?(n=[],smtutil.each(e,function(e){0<=e.type.indexOf("image")&&n.push(e)}),smtutil.ImageValidator.init(n,function(e){o.imageMaxPixel.imageFiles=e,r()})):r()},validate:function(i,r,n,o){var s=this.__validator;this.preValidate(i,r,n,function(){for(var e in s){var t=s[e];if(t.enable&&("local"===t.fileType?returnValues=t.validateFn(i,t.value,s):"remote"===t.fileType?returnValues=t.validateFn(r,t.value,s):"all"===t.fileType&&(returnValues=t.validateFn(n,t.value,s)),returnValues))return void o(!1,{type:e,filter:t,args:returnValues,message:smtutil.I18n?smtutil.I18n.translate(t.errorCode,returnValues):{contents:"There is no I18n Object.",errorCode:t.errorCode,returnValues:returnValues}})}o(!0,null)})},destroy:function(){for(var e in this.__validator)this.__validator[e]&&(this.__validator[e].validateFn=null,this.__validator[e].getMessageValue=null,this.__validator[e]=null)}},smtutil.Event=function(){return{__events:new Array,__afterEvents:new Array,__beforeEvents:new Array,after:function(e,t){this.__afterEvents[e]=t},before:function(e,t){this.__beforeEvents[e]=t},bind:function(e,t){var i=this.__events[e];i&&smtupload.isArray(i)&&0<i.length?i.push(t):this.__events[e]=[t]},unbind:function(e){delete this.__beforeEvents[e],delete this.__events[e],delete this.__afterEvents[e]},trigger:function(e,t){var i=this.__afterEvents[e],r=this.__beforeEvents[e],e=this.__events[e];r&&!r.call(this,t)||this.callFnList(e,t),i&&smtutil.defer(function(){i.call(this,t)},100)},callFnList:function(e,t){if(e&&smtupload.isArray(e)&&0<e.length)for(var i=0;i<e.length;i++)t&&smtupload.isArray(t)&&10<t.length?e[i].call(this,t):e[i].apply(this,t)},destroyEvent:function(){for(var e in this.__events)delete this.__beforeEvents[e],delete this.__events[e],delete this.__afterEvents[e];this.__beforeEvents=null,this.__events=null,this.__afterEvents=null}}},smtutil.Progress=function(){},smtutil.Progress.prototype={totSize:0,loadedSize:0,uploadedFileCount:0,failedFileCount:0,readyFileCount:0,percent:0,files:{},init:function(e){this.refresh();for(var t=0;t<e.length;t++){var i=e[t];this.files[i.id]={totSize:i.size,loadedSize:0},this.totSize+=i.size}this.readyFileCount=e.length},setUpdateFileCount:function(e){e?this.uploadedFileCount+=1:this.failedFileCount+=1,--this.readyFileCount},refresh:function(){var e=this;e.files={},e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.loadedSize=e.totSize=e.failedFileCount=e.uploadedFileCount=e.bytesPerSec=0},setProgress:function(e){var t=this;t.files[e.id].loadedSize=e.loadedSize,t.loadedSize=t.getLoadedSize(),t.percent=t.loadedSize/t.totSize*100,isNaN(t.percent)&&0==t.loadedSize&&0==t.totSize&&(t.percent=100)},isCompleted:function(){var e,t=0,i=this.files,r=this.uploadedFileCount+this.failedFileCount;for(e in i)t+=1;return 0===this.readyFileCount&&t===r},getLoadedSize:function(){var e,t=0,i=this.files;for(e in i)t+=i[e].loadedSize;return t},destroy:function(){this.totSize=null,this.loadedSize=null,this.uploadedFileCount=null,this.failedFileCount=null,this.readyFileCount=null,this.percent=null,this.files=null}},smtutil.Browser=function(){var e,t=navigator.platform,i=navigator.appName,r=navigator.userAgent,n=r.match(/(edge)\/?\s*(\.?\d+(\.\d+)*)/i);return(n=n&&{browser:"Edge",version:n[2]})||((n=r.match(/(opera|opr)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(e=r.match(/version\/([\.\d]+)/i))&&(n[2]=e[1]),n=n&&{browser:"Opera",version:n[2]}),(n=n||(n=r.match(/MSIE ([67].\d+)/))&&{browser:"MSIE",version:n[1]})||(n=r.match(/(msie|trident|chrome|safari|firefox)\/?\s*(\.?\d+(\.\d+)*)/i))&&(null==(e=r.match(/rv:([\d]+)/))&&null==(e=r.match(/version\/([\.\d]+)/i))||(n[2]=e[1]),"Trident"==n[1]&&(n[1]="MSIE"),n=n?{browser:n[1],version:n[2]}:{browser:i,version1:navigator.appVersion,other:"-?"}),n?(n.version&&(r=n.version.split("."),n.version=r[0]),"MSIE"!=n.browser&&"Edge"!=n.browser||("Win32"==t?n.bit="32":"Win64"==t&&(n.bit="64")),n):{browser:"UNDEFINED",version:""}}(),smtutil.Browser.browser.toUpperCase()){case"MSIE":smtutil.Browser.isIE=!0,smtutil.Browser["isIE"+smtutil.Browser.version]=!0,smtutil.Browser["isIE"+smtutil.Browser.bit+"bit"]=!0;break;case"EDGE":smtutil.Browser.isEdge=!0,smtutil.Browser["isEdge"+smtutil.Browser.version]=!0;break;case"FIREFOX":smtutil.Browser.isFirefox=!0,smtutil.Browser["isFirefox"+smtutil.Browser.version]=!0;break;case"CHROME":smtutil.Browser.isChrome=!0,smtutil.Browser["isChrome"+smtutil.Browser.version]=!0;break;case"SAFARI":smtutil.Browser.isSafari=!0,smtutil.Browser["isSafari"+smtutil.Browser.version]=!0;break;case"OPERA":smtutil.Browser.isOpera=!0,smtutil.Browser["isOpera"+smtutil.Browser.version]=!0}function smtupload(){}smtutil.ImageValidator={init:function(e,t){var i=smtutil.uuid();if(e&&e[0]){smtutil.ImageValidator[i]={list:[]};for(var r=smtutil.ImageValidator[i].totLength=e.length,n=0;n<r;n++){var o=e[n];o.uuid=i,o.callback=t,this.readImage(o)}}},readImage:function(i){var r=this,n=new FileReader;n.addEventListener("load",function(e){var t=new Image;t.addEventListener("load",r.onImageLoadHandler.bind(r,t,i),!1),t.file=i,t.style.display="none",t.src=window.URL.createObjectURL(i),n.removeEventListener("load",arguments.callee)}),n.readAsDataURL(i)},onImageLoadHandler:function(e,t){var i=t.callback,r={name:t.name,width:e.width,height:e.height,size:t.size};i&&this.onDoneImageLoad(t.uuid,r,i),window.URL.revokeObjectURL(e.src),e.removeEventListener("load",arguments.callee)},onDoneImageLoad:function(e,t,i){smtutil.ImageValidator[e].list.push(t),smtutil.ImageValidator[e].totLength===smtutil.ImageValidator[e].list.length&&(i.call(this,smtutil.ImageValidator[e].list),smtutil.ImageValidator[e].list=null,delete smtutil.ImageValidator[e])}},window.smtutil=smtutil,function(e,t){smtupload.prototype={UPLOAD_STOP:0,UPLOAD_START:1,File:t.File,XHR:t.XMLHttpRequest,Filter:t.Filter,Progress:t.Progress,Event:t.Event,I18n:smtuploadI18n,ImageValidator:t.ImageValidator,mimeTypes:t.mimeTypes,extend:t.extend,uuid:t.uuid,defer:t.defer,copy:t.copy,combineArray:t.combineArray,each:t.each,isArray:t.isArray,isEmpty:t.isEmpty,typeOf:t.typeOf,browser:t.Browser,addFilter:function(e){var t,i=this.Filter.prototype.__validator;for(t in filter)i[t]=filter[t]},modifyFilter:function(e,t){var i,r=this.Filter.prototype.__validator;for(i in t)r[e][i]=t[i]},removeFilter:function(e){delete this.Filter.prototype.__validator[e]},addRequestHeaders:function(e){for(var t in e)this.XHR.prototype.headers[t]=e[t]},deleteRequestHeader:function(e){for(var t in e)delete this.XHR.prototype.headers[t]},addI18nMessage:function(e){this.I18n&&this.I18n.addMessage(e)},modifyI18nMessage:function(e,t){this.I18n&&this.I18n.modifyMessage(e,t)},setI18nLocale:function(e){this.I18n&&this.I18n.setLocale(e)}},t.I18n=smtupload.prototype.I18n,e.smtupload=new smtupload}(window,smtutil),smtupload.Uploader=function(e){var t=this;t.fileInput=e.browseButton,t.files=[],t.progress=new smtupload.Progress,t.uploadFilter=new smtupload.Filter(e.filters),t.config=function(){var e={};return smtutil.extend(e,this.config),e}.bind(t)(),t.uploadEvent=new smtupload.Event,e.locale&&smtupload.setLocale(e.locale),e.mimeTypes&&(t.config.mimeTypes=e.mimeTypes),t.__extendEventHandle(),this.init.call(this,e)},smtupload.Uploader.prototype={config:{browseButton:{},mimeTypes:[{title:"Image files",extensions:"jpg,gif,png,tif,bmp"},{title:"Zip files",extensions:"zip"},{title:"Document files",extensions:"txt,xls,doc,ppt,xlsx,docx,pptx,rtf,gul,hwp,pdf,mht,eml"}],url:"",preventDuplicate:!0,headers:{},uploadType:"async"},defer:smtupload.defer,id:"",uploadFilter:{},state:smtupload.UPLOAD_STOP,init:function(e){var t=this;t.migrateMimeType(),t.initMimeType(),t.fileInput.addEventListener("change",t.onChangeInput.bind(t)),t.initConfig(e),t.__initEvents()},initConfig:function(e){for(var t in this.id=smtupload.uuid()+"-uploader",e)this.config[t]=e[t]},migrateMimeType:function(){this.fileInput.hasAttribute("accept")&&(this.config.mimeTypes=[{title:"Custom files",extensions:this.fileInput.accept.replace(/\./g,"")}])},initMimeType:function(){this.fileInput.accept=this.getMimeTypeArray()},resetMimeTypes:function(){this.config.mimeTypes=smtupload.Uploader.prototype.config.mimeTypes,this.initMimeType()},setMimeTypes:function(e){this.config.mimeTypes=e,this.initMimeType()},__extendEventHandle:function(){smtupload.extend(this,this.uploadEvent)},__initEvents:function(){var e=this;e.bind("__Upload",e.onUpload),e.bind("__CancelUpload",e.onCancelUpload),e.bind("__UploadProgress",e.onUploadProgress),e.bind("__UploadState",e.onUploadState),e.bind("UploadProgressChanged",e.onUploadProgressChanged),e.bind("UploadStateChanged",e.onUploadStateChanged),e.bind("UploadCompleted",e.onUploadCompleted),e.bind("UploadFailed",e.onUploadFailed),e.bind("__FileAdd",e.onFileAdd),e.bind("__FileDelete",e.onFileDelete),e.bind("__FileUploadProgress",e.onFileUploadProgress),e.bind("__FileUploadLoaded",e.onFileUploadLoaded),e.bind("__FileUploadError",e.onFileUploadError),e.bind("FileAdded",e.onFileAdded),e.bind("FileDeleted",e.onFileDeleted),e.bind("FileUploadProgressChanged",e.onFileUploadProgressChanged),e.bind("FileStateChanged",e.onFileStateChanged),e.bind("Clear",e.onClear),e.bind("Error",e.onError),e.bind("FilterError",e.onFilterError),e.bind("Destroy",e.onDestroy)},addLocalFiles:function(e){for(var t=[],i=0;i<e.length;i++)t.push(new smtupload.File(e[i]));this.validateUploadFilter(t)},addRemoteFiles:function(e){for(var t=[],i=0;i<e.length;i++)t.push(new smtupload.File(e[i],!0));t&&0<t.length&&this.trigger("__FileAdd",[t])},addFilter:function(e){this.uploadFilter.addFilter(e)},modifyFilter:function(e,t){this.uploadFilter.modifyFilter(e,t)},removeFilter:function(e){this.uploadFilter.removeFilter(e)},createErrorBody:function(e){var t=e.target.requestBody;return t.loaded=e.loaded,t.total=e.total,t.xhr=e.target,t},createLoadBody:function(e){return e.target.requestBody},createProgressBody:function(e){var t=e.target.requestBody;return t.loaded=e.loaded,t.total=e.total,t},createRequestBody:function(i,e,t){if(i=smtutil.copy(i),smtupload.isArray(e)?i.files=this.extractOrgFiles(e):(i.id=e.id,i.file=e.orgFile),e.useCustomField)for(var r=0,n=t.length;r<n;r++)e.id===t[r].id&&(delete t[r].id,$.each(t[r],function(e,t){i[e]=t}));return i},destroy:function(){this.destroyEvent();for(var e=0;e<this.files.length;e++)this.files[e].destroy&&this.files[e].destroy();this.fileInput.removeEventListener("change",this.onChangeInput.bind(this)),this.fileInput.accept=null,this.fileInput=null,this.files=null,this.config.mimeTypes=null,this.config=null,this.progress.destroy(),this.uploadFilter.destroy(),this.progress=null,this.uploadFilter=null,this.uploadEvent=null},deleteFiles:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.getFile(e[i]));this.trigger("__FileDelete",[t])},extractOrgFiles:function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i].orgFile;r.uuid=e[i].id,t.push(r)}return t},getLocalPath:function(e){var t=this.fileInput.value.split(",");return t.length?t[e].trim():null},fileBrowse:function(e){this.validateUploadFilter(e)},getLocalFiles:function(){var t=[],e=this.getFiles();return smtupload.each(e,function(e){e.state!==e.FILE_READY&&e.state!==e.FILE_FAILED||t.push(e)}),t},getMimeTypeArray:function(){for(var e=[],t=this.config.mimeTypes,i=0;i<t.length;i++)for(var r=t[i].extensions.split(","),n=0;n<r.length;n++)e.push("."+r[n]);return e},getRemoteFiles:function(){var t=[],e=this.getFiles();return smtupload.each(e,function(e){e.state===e.FILE_SUCCEED&&t.push(e)}),t},getFile:function(e){for(var t=this.getFiles(),i=0;i<t.length;i++){var r=t[i];if(r.id===e)return r}return null},getFiles:function(){return this.files&&0<this.files.length?this.files:[]},reTriggerProgress:function(e,t){this.trigger("FileUploadProgressChanged",[e,t]),this.trigger("__UploadProgress",[t])},upload:function(e,t){var i=this.getLocalFiles();i&&0<i.length&&this.trigger("__Upload",[i,e,t])},uploadSyncNext:function(e,t,i){var r=this,n=(r.state=smtupload.UPLOAD_START,new smtupload.XHR);n.listeners={onprogress:function(e){r.trigger("__FileUploadProgress",[r.createProgressBody(e)])},onload:function(e){400<=e.target.status?r.trigger("__FileUploadError",[r.createErrorBody(e)]):r.trigger("__FileUploadLoaded",[r.createLoadBody(e)])},onerror:function(e){r.trigger("__FileUploadError",[r.createErrorBody(e)])},onloadend:function(e){r.nextSyncFile(e,t,i),n.destroy()}},n.headers=r.config.headers,n.request({method:"POST",url:r.config.url,body:r.createRequestBody(t,e,i)})},uploadSync:function(e,t,i){this.prepareUploadSync(e),this.uploadSyncNext(e[0],t,i)},prepareUploadSync:function(e){this.readyToUploadFiles={};for(var t=0;t<e.length;t++)this.readyToUploadFiles[e[t].id]=!1},nextSyncFile:function(e,t,i){for(var e=e.target.requestBody.id,r=(this.readyToUploadFiles[e]=!0,this.getLocalFiles()),n=null,o=0;o<r.length;o++)if(0==this.readyToUploadFiles[r[o].id]){n=r[o];break}null!=n&&this.uploadSyncNext(n,t,i)},uploadAsync:function(e,i,r){var n=this;smtupload.each(e,function(e){n.state=smtupload.UPLOAD_START;var t=new smtupload.XHR;t.listeners={onprogress:function(e){n.trigger("__FileUploadProgress",[n.createProgressBody(e)])},onload:function(e){400<=e.target.status?n.trigger("__FileUploadError",[n.createErrorBody(e)]):n.trigger("__FileUploadLoaded",[n.createLoadBody(e)])},onerror:function(e){n.trigger("__FileUploadError",[n.createErrorBody(e)])},onloadend:function(e){t.destroy()}},t.headers=n.config.headers,t.request({method:"POST",url:n.config.url,body:n.createRequestBody(i,e,r)})})},uploadAll:function(e,t){var i=this,r=(i.state=smtupload.UPLOAD_START,new smtupload.XHR);r.listeners={onprogress:function(e){var t=i.progress;t.files,t.getLoadedSize(),e.loaded},onload:function(e){},onerror:function(e){},onloadend:function(e){}},r.headers=i.config.headers,r.request({method:"POST",url:i.config.url,body:i.createRequestBody(t,e)})},validateUploadFilter:function(i){var r=this,e=(r.config,i),t=r.getRemoteFiles(),n=smtupload.combineArray(e,r.getFiles());r.uploadFilter.validate(e,t,n,function(e,t){e?r.trigger("__FileAdd",[i]):r.trigger("FilterError",[{type:t.type,filter:t.filter,args:t.args,message:t.message}])})},onClear:function(){var e=this;e.fileInput.value="",e.progress.refresh();for(var t=0;t<e.files.length;t++)e.files[t].destroy&&e.files[t].destroy();e.files=[],e.state=smtupload.UPLOAD_STOP},onCancelUpload:function(){},onChangeInput:function(e){e=e.target.files;0<e.length&&this.fileBrowse(e)},onFileUploadProgress:function(e){var t=this.getFile(e.id),i=smtupload.copy(t,{exclude:["function"]});t.setProgress(e),t.state===t.FILE_READY&&t.setState(t.FILE_UPLOADING),this.trigger("FileUploadProgressChanged",[i,t]),this.trigger("__UploadProgress",[t])},onFileUploadProgressChanged:function(e,t){},onFileUploadLoaded:function(e){var t=this.getFile(e.id),i=smtupload.copy(t,{exclude:["function"]});t.xhr=e.xhr,t.setState(t.FILE_SUCCEED),this.trigger("FileStateChanged",[i,t]),this.trigger("__UploadState",[t])},onFileUploadError:function(e){var t=this,i=t.getFile(e.id),r=smtupload.copy(i,{exclude:["function"]});i.setState(i.FILE_FAILED),400<=e.xhr.status&&(e=e.xhr,t.trigger("Error",[{code:e.status,message:"[HTTP] "+e.statusText,file:i,response:e.responseText,responseHeaders:e.getAllResponseHeaders()}])),t.reTriggerProgress(r,i),t.trigger("FileStateChanged",[r,i]),t.trigger("__UploadState",[i])},onFileAdd:function(e){var t,i=this,r=0,n=[];smtupload.isArray(e)?smtupload.each(e,function(e){e instanceof smtupload.File||(e=new smtupload.File(e),smtutil.isIE()&&(e.path=i.getLocalPath(r))),n.push(e),i.files.push(e),r++}):(e instanceof smtupload.File||(e=new smtupload.File(e),smtutil.isIE()&&(_file.path=i.getLocalPath(r)),_file.path=i.getLocalPath(0)),t=e,i.files.push(e)),i.state=smtupload.UPLOAD_STOP,i.trigger("FileAdded",[t||n])},onFileDelete:function(e){this.getFiles();if(smtupload.isArray(e))for(var t=0;t<e.length;t++)this.removeItemById(e[t].id);else this.removeItemById(e.id);this.trigger("FileDeleted",[e])},removeItemById:function(e){for(var t=this.files,i=0;i<t.length;i++)if(t[i].id===e)return void t.splice(i,1)},onFileAdded:function(e){this.fileInput.value=""},onFileDeleted:function(e){},onFileStateChanged:function(e,t){},onError:function(e){this.fileInput.value=""},onFilterError:function(e){e.type,e.filter,e.message;this.fileInput.value=""},onDestroy:function(){this.destroy()},onUploadState:function(e){var t=this.progress,i=smtupload.copy(t,{exclude:["function"]});e.state===e.FILE_SUCCEED?t.setUpdateFileCount(!0):t.setUpdateFileCount(!1),t.xhr=e.xhr,this.trigger("UploadStateChanged",[i,t]),t.isCompleted()&&(0<t.failedFileCount?this.trigger("UploadFailed",[t]):this.trigger("UploadCompleted",[t]))},onUploadStateChanged:function(e,t){this.progress},onUpload:function(e,t,i){switch(this.config.uploadType||"async"){case"async":this.progress.init(e),this.uploadAsync(e,t,i);break;case"sync":this.progress.init(e),this.uploadSync(e,t,i)}},onUploadProgress:function(e){var t=this.progress,i=smtupload.copy(t,{exclude:["function"]});t.setProgress(e),this.trigger("UploadProgressChanged",[i,t])},onUploadProgressChanged:function(e,t){},onUploadCompleted:function(e){this.state=smtupload.UPLOAD_STOP,this.progress.refresh()},onUploadFailed:function(e){this.state=smtupload.UPLOAD_STOP,this.progress.refresh()}},window.SMART_UPLOADER=smtupload.Uploader;